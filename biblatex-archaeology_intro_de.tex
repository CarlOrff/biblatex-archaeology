% arara: pdflatex
% arara: biber
% arara: makeindex: { german: 1}
% arara: pdflatex until !found('log', '\\(?(R|r)e\\)?run (to get|LaTeX)')
% arara: clean: { extensions: [aux,log,out,toc,bbl,bcf,bgl,run.xml,idx,ind,ilg] }
\documentclass[
	11pt,        % font size
	table,       % is passed to (x)color package when loaded implicitly
	twoside,     % two-sided printing
	notitlepage, % no pagebreak after \maketitle
]{scrreprt}

%%% The following conditionals allow for compiling with various engines without edits.
%%% Mainly concerning fonts.
\newcommand{\IfTeXforHt}[2]{\ifdefined\HCode#1\else#2\fi} % detect tex4ht
\usepackage{iftex}
\IfTeXforHt{
	% missing hyperref
	\usepackage{xcolor}
	\providecommand*{\href}[2]{\HCode{<a class="href" href="\detokenize{#1}">#2</a>}}
}{}
\ifpdftex % pdfLaTeX
	\usepackage[T1]{fontenc}
	%\usepackage[utf8]{inputenc} % loaded by default with up-to-date installs
	\usepackage[
		protrusion=true,
		expansion=true,
		verbose=true,
		babel=true,
		tracking=true
	]{microtype}
	\DeclareMicrotypeSet*[tracking]{my}{ font = */*/*/sc/* }% 
	\SetTracking{ encoding = *, shape = sc }{ 45 }% Hier wird festgelegt,
			% dass alle Passagen in Kapitälchen automatisch leicht
			% gesperrt werden.
\else
	\ifluatex % LuaLaTeX
		%\usepackage{fontspec} % loaded by default with up-to-date installs
		\usepackage[
			protrusion=true,
			expansion=true,
			verbose=true,
			babel=true,
			tracking=true
		]{microtype}
		\DeclareMicrotypeSet*[tracking]{my}{ font = */*/*/sc/* }% 
		\SetTracking{ encoding = *, shape = sc }{ 45 }% Hier wird festgelegt,
			% dass alle Passagen in Kapitälchen automatisch leicht
			% gesperrt werden.
	\else
		\ifxetex % XeLaTeX
			%\usepackage{fontspec} % loaded by default with up-to-date installs
			% microtype: no tracking and font expansion
			\usepackage[
				protrusion=true,
				expansion=false,
				verbose=true,
				babel=true,
				tracking=false
			]{microtype}
		\else
		\fi
	\fi
\fi

%%% Fonts
\IfTeXforHt
	{}
	{\usepackage[osf]{noto}  % Noto, NotoSans, NotoSansMono optimized for screens; osf = old style figures ("Mediävalziffern")
	\ifpdftex % pdfLaTeX
\relax
	\else
		\setmonofont{Noto Mono}[Scale=MatchLowercase] % \setmonofont from fontspec package
		% This is already done by noto package but we need it to get rid of the default Ligatures=TeX
		% option for monospaced font which urges listings to format quotes. The ususal upquote package
		% does not work with Noto font.
	\fi}
\usepackage{fontawesome} % a collection of icons (primarily intended for websites)

%%% Bibliography
\usepackage[
	style=rgk-inline,
	origdate=long,      % for better printing of date examples
]{biblatex}
\IfFileExists{ingram-braun-local.sty}
    {\usepackage{ingram-braun-local}
     \addbibresource{\IBbibmain}}
    {\addbibresource{biblatex-archaeology-exampel.bib}}
% embed a bib file for arbitrary data. filecontents environment is part of LaTeX kernel
% since 9/2019. With older versions the eponym package must be loaded.
\begin{filecontents}[overwrite]{\jobname.bib} 
@MISC{intro:date:1,origdate={1980}}
@MISC{intro:date:2,origdate={1980/1992}}
@MISC{intro:date:3,origdate={1980/}}
@MISC{intro:date:4,origdate={/1992}}
@MISC{intro:date:5,origdate={1980/..}}
@MISC{intro:date:6,origdate={../1992}}
@MISC{intro:date:7,origdate={1908-01}}
@MISC{intro:date:8,origdate={1980-01-31}}
@MISC{intro:date:9,origdate={1980-01-31/1992-03}}
@MISC{intro:date:10,origdate={1980-01-31T09:30:00}}
@MISC{intro:date:11,origdate={1980-01-31T09:30:00/1992-03}}
@MISC{intro:date:12,origdate={0000}}
@MISC{intro:date:13,origdate={-0332}}
@MISC{intro:date:14,origdate={-0332/-0331}}
@MISC{intro:date:15,origdate={0571}}
@MISC{intro:date:16,origdate={-0332/-0331-02}}
@MISC{intro:date:17,origdate={-0332-11-28/-0331-02}}
@MISC{intro:date:18,origdate={1980~}}
@MISC{intro:date:19,origdate={1980?}}
@MISC{intro:date:20,origdate={1980%}}
@MISC{intro:date:21,origdate={1980-01-XX}}
@MISC{intro:date:22,origdate={1980-XX-XX/1992-XX-XX}}
@MISC{intro:date:23,origdate={1980-24}}
@MISC{intro:name:1,namec={Hans-Peter Müller}}
@MISC{intro:name:2,namec={Müller, Hans-Peter}}
@MISC{intro:name:3,namec={Müller, Sr, Hans-Peter}}
@MISC{intro:name:4,namec={Thomas von Aquin}}
@MISC{intro:name:5,namec={von Aquin, Thomas}}
@MISC{intro:name:6,namec={von Aquin, Jr., Thomas}}
@MISC{intro:name:7,namec={Capablanca y Graupera, José Raoul}}
@MISC{intro:name:8,namec={José Raoul {Capablanca y Graupera}}}
@MISC{intro:name:9,namec={von und zu Sachsen-Coburg und Gotha, Heinrich Maria}}
@MISC{intro:name:10,namec={Heinrich Maria von und zu Sachsen-Coburg und Gotha}}
@MISC{intro:name:11,namec={{Stiftung der Deutschen Länder}}}
@MISC{intro:name:12,namec={Aristoteles}}
@MISC{intro:name:13,namec={given={Heinrich Maria}, family={Sachsen-Coburg und Gotha}, suffix=Jr, prefix={von und zu}}}
@MISC{intro:name:14,namec={Ulla Lund Hansen}}
@MISC{intro:name:15,namec={Hansen, Ulla Lund}}
@MISC{intro:name:16,namec={{Father and Sons Inc.} and Joe Andy Paul}}
\end{filecontents}
\addbibresource{\jobname.bib}
\ExecuteBibliographyOptions[misc]{skipbib} % don't want these tests in bibliography
\DeclareSourcemap{
	\maps[datatype=bibtex]{
% Since the bbl-file does not contain the literal content of date fields anymore we store it in another field:
		\map[overwrite]{
			\perdatasource{\jobname.bib}
			\step[
				fieldsource=origdate,
			]
			\step[
				fieldset=userd,
				origfieldval,
			]
		}
% Similar issue with names. We copy them in a literal field in order to suppress the parser:
		\map[overwrite]{
			\perdatasource{\jobname.bib}
			\step[
				fieldsource=namec,
			]
			\step[
				fieldset=userc,
				origfieldval,
			]
		}
	}
}
% Employ \scantokens instead of \detokenize in order to keep Umlauts in PDFLaTeX. Beware: removes braces
\DeclareFieldFormat*{userd}{\texttt{\ifpdftex\scantokens{#1\relax}\else\detokenize{#1}\fi}}
\DeclareFieldFormat*{userc}{\texttt{\ifpdftex\scantokens{#1\relax}\else\detokenize{#1}\fi}}
\DeclareCiteCommand{\citeorigdate}{\printorigdate}{}{}{}{}
\newcommand{\DatumDemo}[1]{\citefield{#1}{userd} & \citeorigdate{#1}\\}
\newcommand{\NamenDemo}[1]{\citefield{#1}[userd]{userc} & \citename{#1}[family-given]{namec}\\}
% use a category to separate examples from secondary literature
\DeclareBibliographyCategory{examples}
\addtocategory{examples}{
	steinmetz:strahl:wilbers:1979,
	cossel:1933-35,
	ib:domino:europa,
}
\usepackage[many]{tcolorbox}
\newcommand*{\Beispiel}[1]{%
\begin{tcolorbox}[
    colback=zebraeven,
    colframe=gray!99,
    fonttitle=\bfseries\sffamily,
    title=\vspace{0.7ex}Beispiel,
    halign=flush left,
]%
\small\texttt{\detokenize{#1}}
\tcblower#1%
\end{tcolorbox}}
 
 
%%% Babel works with lualatex and xelatex with up-to-date installs.
%%% Last language in list acts as document main.
\usepackage[english,latin,french,dutch,danish,ngerman,german]{babel}
\usepackage[german=quotes]{csquotes} % context sensitive quotatation
\usepackage{ellipsis} % better typesetting of ... (must load after babel)
%%% code listings
\usepackage{listings}\lstloadlanguages{[LaTeX]TeX} % pretty-print code
\lstset{
	basicstyle=\ttfamily,
	language=[LaTeX]TeX,
	numbers=left,
	stepnumber=1,
	numbersep=5pt,
	numberstyle=\small\color{black},
	frame=single,
	tabsize=2,
	backgroundcolor=\color{zebraeven},
	breaklines,
}
\ifpdftex
	 % pdfLaTeX: no font macro substitution in verbatim environments
	\lstset{literate=%
	  {Ö}{{\"O}}1
	  {Ä}{{\"A}}1
	  {Ü}{{\"U}}1
	  {ß}{{\ss}}1
	  {ü}{{\"u}}1
	  {ä}{{\"a}}1
	  {ö}{{\"o}}1
	}
\else\fi
%%% Table layout.
\usepackage{xltabular} % long tables across pages with tabularx features
\usepackage{booktabs} % adding layout features to other tabular packages
\usepackage{array} % define new columntypes
\newcolumntype{L}{>{\raggedright\small\arraybackslash}X}
\colorlet{zebraodd}{white}
\colorlet{zebraeven}{gray!15}
\newenvironment*{Zebratabelle}
	{\renewcommand*{\arraystretch}{1.5}% increase row padding locally
	 \rowcolors{1}{zebraodd}{zebraeven}}
	{\rowcolors{1}{zebraodd}{zebraodd}}
	
%%% Indices (avoid makeindex/hyperref issues))
%\usepackage[makeindex]{splitidx}
%\usepackage{makeidx}
%\makeindex

%%% Logos
\usepackage{bxtexlogo}
\bxtexlogoimport{*}
\bxtexlogoimport{**}

%%% Semantic markup
\usepackage{xspace}
\newrobustcmd*{\blx}{\Paket{bib\-la\-tex}\xspace}
\makeatletter
\newrobustcmd*{\archbib}{\Paket{\blxarch@name@hyph}\xspace}
\newrobustcmd*{\Biber}{\Paket{Biber}\xspace}
\makeatother
\newrobustcmd*{\Befehl}[1]{\texttt{\textbackslash#1}\index{Kommandos (TeX)!\texttt{\textbackslash#1}}}
\newrobustcmd*{\Typ}[1]{\texttt{\symbol{64}#1}\index{Dokumententypen!\texttt{#1}}}
% no hyphenation within tt fonts:
\newcommand*{\TeXPaket}{Paket (\protect\TeX)!}
\newrobustcmd*{\Paket}[1]{\textsf{#1}\index{\TeXPaket#1@\textsf{#1}}}
\newrobustcmd*{\App}[1]{\textsf{#1}\index{Paket (kein \protect\TeX)!\textsf{#1}}}
\newrobustcmd*{\Feld}[1]{\texttt{#1}\index{Felder!\texttt{#1}}}
\newrobustcmd*{\Option}[1]{\texttt{\detokenize{#1}}\index{Optionen!\texttt{\protect\detokenize{#1}}}}
\newrobustcmd*{\Umgebung}[1]{\texttt{#1}\index{Umgebungen!\texttt{#1}}}
\newrobustcmd*{\Lokalisierung}[1]{\texttt{#1}\index{Lokalisierung!\texttt{#1}}}
\newrobustcmd*{\Kbd}[1]{\texttt{#1}}
\newrobustcmd*{\Stil}[1]{\texttt{#1}\index{Stile!\texttt{#1}}}
\newrobustcmd*{\Datei}[1]{\texttt{\detokenize{#1}}\index{Dateien!\texttt{\protect\detokenize{#1}}}}
\newrobustcmd*{\Englisch}[1]{\foreignlanguage{english}{\emph{#1}}}
\newrobustcmd*{\Latein}[1]{\foreignlanguage{latin}{\emph{#1}}}
\newcommand*{\Wichtig}{\IfTeXforHt{!}{\faExclamationCircle}}
% logos to index (the generic \TeX and \LaTeX are not renewable)
\newrobustcmd*{\LaTeXi}{\LaTeX\index{\TeXPaket LaTeX@\protect\LaTeX}}
\newrobustcmd*{\TeXi}{\TeX\index{\TeXPaket TeX@\protect\TeX}}
\let\bibtexlogo\BibTeX
\renewrobustcmd*{\BibTeX}{\bibtexlogo\index{\TeXPaket BibTeX@\protect\bibtexlogo}}
\let\latexlogo\LaTeX
\renewrobustcmd*{\LaTeX}{\latexlogo\index{\TeXPaket LaTeX@\protect\latexlogo}}
\let\latexmllogo\LaTeXML
\renewrobustcmd*{\LaTeXML}{\latexmllogo\index{\TeXPaket LaTeXML@\protect\latexmllogo}}
\let\xelatexlogo\XeLaTeX
\let\lyxlogo\LyX
\renewrobustcmd*{\LyX}{\lyxlogo\index{\TeXPaket LyX@\protect\lyxlogo}}
\let\lualatexlogo\LuaLaTeX
\renewrobustcmd*{\LuaLaTeX}{\lualatexlogo\index{\TeXPaket LuaLaTeX@\protect\lualatexlogo}}
\let\pdflatexlogo\pdfLaTeX
\renewrobustcmd*{\pdfLaTeX}{\pdflatexlogo\index{\TeXPaket pdfLaTeX@\protect\pdflatexlogo}}
\let\xelatexlogo\XeLaTeX
\renewrobustcmd*{\XeLaTeX}{\xelatexlogo\index{\TeXPaket XeLaTeX@\protect\xelatexlogo}}

%%% Allow for fixed floating environments (this is often a bad idea!). Usually you want them to float
%%% and to refer to them through labels like "fig. 3" or "tab. 9").
\usepackage{float}
%%% title data
\title{Einführung in \blx{} und \archbib\thanks{gehört zur Dokumentation von \archbib{~v.2.3.0}}}
\author{Ingram Braun\\\href{https://ingram-braun.net/}{\texttt{https://ingram-braun.net/}}}
\date{\today}
%%% Load hyperref for clickable links and PDF metadata as late as possible. The default layout with colored borders around links is ugly.
\usepackage{hyperref}
\usepackage[ocgcolorlinks]{ocgx2} % suppress color links on printers if PDF viewer can handle Optional Content Groups (OCG)
\usepackage{hyperxmp} % extended metadata
\hypersetup{
	linktocpage=true,       % only page numbers are clickable
	colorlinks=true,        % colored links
	breaklinks=true,        % break URLs
	pdfborder={0 0 0},      % for removing borders around links
	bookmarksnumbered=true, % If Acrobat bookmarks are requested, include section numbers.
	bookmarksopen=false,    % If Acrobat bookmarks are requested, show them with all the subtrees 
	linkcolor=blue,
	citecolor=blue,
	urlcolor=teal,
	pdfpagemode={UseOutlines}, % show pdf bookmarks (indices) on startup; does not function all the time
	pdfdisplaydoctitle=true,
	pdfauthor={Ingram Braun},
	pdftitle={biblatex-archaeology v2.3 Tutorial DE},
	pdfcaptionwriter={Ingram Braun},
	pdflang=de,
	pdfmenubar=true,        % make PDF viewer's menu bar visible
	pdfkeywords={archaeology, anthropology, bibliography, typesetting, LaTeX, BibTeX, biblatex, history, Egyptology},
	pdfapart=1,
	pdfaconformance=B,
	pdfmetalang=en,
	pdfcontacturl={https://ingram-braun.net/erga/the-biblatex-archaeology-styles-for-german-cultural-anthropology/\#ib_campaign=biblatex-archaeology-v2.3\&ib_medium=manual\&ib_source=github\&ib_content=pdfcontacturl, https://github.com/CarlOrff/biblatex-archaeology, https://friendica.ingram-braun.net/profile/ib, https://bsky.app/profile/ingram-braun.net, https://independent.academia.edu/IngramBraun},
}
%%% Context sensitive references (cleveref must be loaded after hyperref)
\usepackage[german]{cleveref}
\crefname{fig}{Abbildung}{Abbildungen}
\Crefname{fig}{Abbildung}{Abbildungen}
\crefname{tab}{Tabelle}{Tabellen}
\Crefname{tab}{Tabelle}{Tabellen}

% The following code was borrowed from https://tex.stackexchange.com/questions/376763/incomplete-iffalse-all-text-was-ignored-after-line-x-with-lstlisting
% This patches a hard-to-track-down error with page breaks in listings only observed in PDFLaTeX.
\makeatletter
\expandafter\let\csname active@char\string?\endcsname\relax
\expandafter\let\csname active@char\string!\endcsname\relax
\expandafter\let\csname active@char\string:\endcsname\relax
\initiate@active@char{?}
\initiate@active@char{!}
\initiate@active@char{:}
\makeatother

%%% End header and begin text body.
\begin{document}

\IfTeXforHt{}{\maketitle}

\begin{abstract}
Dieses Dokument bietet eine Einführung in \blx{} und \archbib{} unter dem Aspekt strikter Anwendungsorientierung. Es geht also um Ausfüllen der
Datenbanken und das Zitieren in Dokumenten; dazu die Zusammenarbeit mit anderer Software. Athematisch sind die technischen Interna und das Entwickeln von Stilen.
Vermutlich liegt bei den meisten Lesern der Erstkontakt mit \LaTeXi{} noch nicht lange zurück. Und wahrscheinlich war \blx{} bzw. \archbib{} einer der wesentlichen Gründe für das Interesse. Deswegen werden in \cref{kap_intro} zuerst einige konzeptionelle Probleme angesprochen, die ein gewisses Verständnis dafür wecken sollen, warum \blx{} so ist, wie es ist. Dann folgt in \cref{kap_blx} eine Vorstellung der Eigenschaften von \blx. Im Prinzip sollte man nach der Lektüre \blx{} benutzen können, soweit man es bei den \Englisch{out of box}-Einstellungen beläßt. Sobald man Einstellungen ändern oder Befehle neu definieren möchte, wird man schwerlich umhinkommen, in das Handbuch zu schauen. In dem \blx-Teil gibt es nur wenige Bezüge zu \archbib. Es sollte also auch für Interessenten anderer Stile nützlich sein. Im \cref{kap_blxarch} werden die von \archbib{} zur Verfügung gestellten Features etwas ausführlicher besprochen. Aber auch hier gilt, daß es sich um eine Einführung handelt, die die Handbuchlektüre auf Dauer nicht ersetzen kann.
\end{abstract}
 
\tableofcontents

\chapter{Einleitende Überlegungen und technische Hinweise}\label{kap_intro}

\section{Voraussetzungen und typographische Vereinbarungen in diesem Dokument}

\paragraph{Sprachökonomie} Ich benutzte hier aus sprachökonomischen Gründen das generische Maskulinum. Selbstverständlich sind Frauen und dritte Geschlechter jedweder Observanz ebenso angesprochen.

\paragraph{Was man schon wissen sollte}
Ich gehe davon aus, daß schon minimale \LaTeXi-Kenntnisse vorhanden sind. Sie sollten also wissen, daß \textellipsis
\begin{itemize}
\item \textellipsis Quelldateien die Extension \Datei{*.tex} haben.
\item \textellipsis Dokumententypen als Klassen definiert sind-
\item \textellipsis Dokumente einen Header haben, in dem man mit \Befehl{usepackage} Pakete laden kann und ihnen mit \Kbd{[key=value]} Optionen übergeben kann.
\item \textellipsis man Kommandos mit \Befehl{newcommand} selbst erstellen und mit \Befehl{renewcommand} verändern kann.
\item \textellipsis bei \Option-Läufen Hilfsdateien produziert werden, die man gefahrlos löschen kann.
\item \textellipsis man u.\,U. mehr als einen \LaTeXi-Lauf braucht, um eine komplette Ausgabe (meist PDF) herzustellen.
\item \textellipsis es verschiedene \LaTeXi-Engines gibt.
\item \textellipsis Quellcodekommentare mit einem Prozentzeichen beginnen.
\item \textellipsis man mit den Paketen \Paket{babel} oder \Paket{polyglossia} Unterstützungen für zahlreiche Sprachen laden kann.
\end{itemize}

\paragraph{Schriftarten}
\begin{itemize}
\item In Antiqua (proportionale Schrift mit Serifen, also die kleinen Fortsätze am Strichende zur Verstärkung des Linieneindrucks) steht der Fließtext.
\item In \textsf{Grotesk} (proportionale serifenlose Schrift) stehen die Namen von Programmen (vulgo \enquote{Apps}) und Paketen. Für einige bekannte Systeme der \TeXi-Welt gibt es Logos, z. B. \LaTeXi. Auch gezählte wie ungezählte Überschriften werden so geschrieben, weil Serifen bei großer Schrift klobig wirken.
\item In \texttt{nichtproportionaler Schrift} stehen Ein- und Ausgaben von Computern, Dateinamen, URLs und Code(fragmente). Ein Dollarzeichen am Zeilenanfang symbolisiert das Prompt eines Terminals, also z. B. \Kbd{C:\textbackslash{}Benutzer\textbackslash{}USERNAME>} der \Datei{cmd.exe} bzw. \Kbd{PS C:\textbackslash{}Benutzer\textbackslash{}\%USERNAME\%>} der PowerShell von Windows oder \Kbd{[<USERNAME>]<DIR>\#} auf der Bash eines \App{Linux}systems.
\begin{lstlisting}
$ latex -v
\end{lstlisting}
z.\,B. gibt die Versionsnummer des aktuellen \LaTeXi-Programms zurück.
\end{itemize}

\paragraph{standardisierte Pfade}
Wenn man \TeXi-Quellen zitiert, macht man dies üblicherweise nach dem folgenden Muster: \Kbd{CTAN:path/to/package}. Das Protokoll CTAN verweist auf das gleichnamige Softwarearchiv der \TeXi-Welt \Englisch{Comprehensive \TeXi{} Archive Network\index{CTAN}}. Es ist aus Kapazitätsgründen unerwünscht, auf seine physikalische Adresse zu verlinken. \Kbd{CTAN:} ist gegen die physikalische Adresse eines möglichst nahegelegenen Spiegels zu ersetzen. Einer Liste solcher Spiegelserver findet sich auf \url{https://www.ctan.org/mirrors/}.

Auch die \TeXi-Distributionen haben einen standardisierten Aufbau. Als \Datei{\%TEXMF} bezeichnet man den Wurzelordner einer \TeXi-Installation, also bei \TeXi{} Live unter dem Ordner mit der Jahreszahl. In \Datei{\%TEXMFLOCAL} kann man lokale Dateien unterbringen, die beim Updaten nicht überschrieben werden sollen. \Datei{\%TEXMFHOME} ist ein Ordner für Dateien, die dem aktuellen Benutzerkonto zugeordent sind. Wenn \LaTeXi{} eine Datei sucht, z. B. weil sie mit \Befehl{usepackage} in ein Dokument eingebunden wurde, tut es das in der Reihenfolge \Kbd{Dokumentenordner} – \Datei{\%TEXMFHOME} – \Datei{\%TEXMFLOCAL} – \Datei{\%TEXMF}. Außerhalb des Dokumentenordners sucht es allerdings nicht im Dateisystem, sondern in der Paketdatenbank, die man entsprechend updaten muß, wenn man neue Dateien installiert oder entfernt. Private Einstellungen wie z. B. Briefköpfe kann man in \Datei{\%TEXMFHOME/tex/latex/myconfig/myconfig.sty} ablegen. Ebenso kann man dort Entwicklerversionen von Paketen installieren. Wenn man sie nicht mehr braucht, löscht man sie einfach wieder, denn die aktuelle Produktivversion findet sich ja immer noch unangetastet in \Datei{\%TEXMF}.

Die Dateien finden sich an folgenden Ablageorten

Bei den \BibTeX-Datenbanken sind die Administratoren der Distributionen sehr zurückhaltend. Die von \archbib{} mitgelieferten Datenbanken finden sich nur in MiK\TeXi{} im Standardpfad und werden ohne Pfadangabe gefunden. Auf \TeXi{} Live sind sie im Quellcode-Verzeichnis, wo nicht gesucht wird. Wenn man Pakete in \Datei{\%TEXMFLOCAL} oder \Datei{\%TEXMFHOME} installiert, muß man dieselben Hierarchien verwenden. Manche Pakete, so auch \blx{} und \archbib{} ab Version 2.2, liefern ein Archiv \Datei{<package>.tds.zip} mit. Darin sind die Dateien alle bereits in die richtigen Ordner einsortiert. Man kann sie einfach in einen der Wurzelordner entpacken, und alle Dateien sind dort, wo sie hingehören.

Die Handbücher braucht man nicht im Dateisystem zu suchen. Folgender Konsolenbefehl tut es auch:
\begin{lstlisting}
$ texdoc <package>
\end{lstlisting}

\paragraph{Argumente von Kommandos}
Verpflichtende Argumente von Kommandos werden in geschweifte Klammern gesetzt; optionale fast immer in eckige, selten auch in runde:
\begin{lstlisting}
$ \kommando{verpflichtend 1}[optional 1][optional 2]{verpflichtend 2}
\end{lstlisting}
Leider kann man sich nicht hundertprozentig darauf verlassen, aber in diesem Dokument ist das so.

\section{Soll man \LaTeXi{} überhaupt in den deutschsprachigen Geisteswissenschaften verwenden?}

Da vermutlich so mancher in dieses Dokument sieht, um sich zu fragen, ob eine Beschäftigung mit \LaTeXi{} überhaupt aussichtsreich ist, will ich versuchen, hierzu ein paar Entscheidungshilfen zu geben.

\LaTeXi{} (Sprich \enquote{Lahtech} -- das vermeintliche X ist ein griechisches Chi) ist eigentlich nur eine Makrosprache für \TeXi{}. \TeXi{} wurde 197x von dem bedeutenden Informatiker Donald Knuth entwickelt, weil er sich über den armseligen Mathematiksatz in den Fachzeitschriften geärgert hatte. Seine Popularität verdankt es neben dem Umstand, daß es typographisch ein Riesenfortschritt war, auch der Lizenz, die es auch zur kommerziellen Nutzung freigab. Da reines \TeXi{} schwer zu schreiben ist, entwickelte Leslie \textbf{La}mport die Makrosprache \LaTeXi{} -- nicht die einzige, aber die populärste und mit den meisten Erweiterungen gesegnete. Später ging er übrigens zu Microsoft und war einer der wesentlichen Entwickler von \App{MS~Word}.

Die Frage nach der besten Software ist für gewöhnlich sehr ideologielastig -- vermutlich hat jeder schon  einmal solche ebenso ermüdenden wie fruchtlosen Debatten in den sozialen Medien gesehen. Für \LaTeXi{} gibt es offensichtlich zwei schwere Hypotheken:
\begin{enumerate}
\item \LaTeXi{} hat eine sehr steile Lernkurve, die bei Anfängern erheblich Frust erzeugen kann, wenn viel Zeit für die Suche nach den Ursachen von Fehlermeldungen aufgewendet wird.
\item Geisteswissenschaftliche Zeitschriften aus dem deutschen Sprachraum akzeptieren in aller Regel keine \LaTeXi-Quellen.
\end{enumerate}
Es ist absolut verständlich, wenn man deshalb \LaTeXi{} nicht verwenden möchte. Die Vorteile von \LaTeXi{} erschließen sich desto besser, je komplexer Dokumente werden.
\begin{enumerate}
\item Es gibt ein riesiges Archiv von Erweiterungen (CTAN = \Englisch{Comprehensive \TeXi{} Archive Network})
\item Der Satz ist erheblich präziser als bei Textverarbeitungsprogrammen.
\item Das Automatisierungspotential ist sehr viel höher als bei Textverarbeitungsprogrammen. Zudem ist es als Konsolenprogramm sehr gut zu \Englisch{social engineering} fähig, also zur Kommunikation mit anderen Programmen und Programmiersprachen.
\item Es ist kostenlos beziehbar. Daß die Lizenz den kommerziellen Einsatz uneingeschränkt erlaubt, wurde oben schon erwähnt.
\item Es ist mittlerweile ziemlich gut möglich, \LaTeXi-Dokumente in HTML oder XML-basierte Formate wie ODT oder DOCX zu konvertieren.
\item \LaTeXi{} ist nebenbei auch ein enorm mächtiges Grafikprogramm.
\end{enumerate}

Mit \LaTeXi{} kann man nicht nur die üblichen Aufgaben des Textsatzes erledigen, sondern auch Bibliographien, Indices und Glossare automatisiert erstellen, Atommodelle und Landkarten zeichnen, Noten in Partituren stechen, Schachpartien direkt aus Datenbanken ausdrucken, Funktionsgraphen plotten, ausführbaren Code in anderen Programmiersprachen einbetten etc. pp.

Als ich begann, mich mit \LaTeXi{} zu befassen, hörte man noch gruselige Geschichten von Diplomarbeiten in \App{MS~Word}, die nach ihrem finalen Wachstum kurz vor Abgabe abstürzten. Damals erreichten die Bürocomputer allerdings auch nur einen Bruchteil ihrer heutigen Performanz und waren mit großen, grafikreichen Dokumenten tatsächlich stark belastet. Ich weiß nicht, ob das Problem wirklich je so groß war, wie gerne kolportiert wird, aber diese Geschichten haben sich längst verflüchtigt. Mittlerweile kann man auch PDF exportieren (das gab es noch nicht, als ich es das letztemal benutzt habe). Die Satzqualität ist deutlich geringer als mit \LaTeXi. Trotzdem werden heute Bücher (etwa in den \Englisch{Print on demand}-Verlagen) direkt von \App{MS~Word}-Vorlagen gedruckt, und die Satzqualität ist auch nicht so schlecht, daß man sie überhaupt nicht mehr in die Hand nehmen mag. Die defizitäre Satzqualität ist konzeptbedingt. Textverarbeitungsprogramme wie \App{MS~Word}, \App{LibreOffice} und dergleichen verfahren nach dem WYSIWYG-Prinzip: \Englisch{What You See Is What You Get}. Das funktioniert nur, wenn die sehr komplexen Satzberechnungen in Echtzeit ausgeführt werden, weil sonst der Bildschirm während des Renderns einfrieren würde. In \LaTeXi{} hingegen wird nur auf ausdrückliche Benutzeranweisung gerendert, und man kann auf das Ergebnis warten.

Ein weiterer Nachteil von \LaTeXi{} war lange Zeit die fehlende Konvertierbarkeit seiner Ausgabeformate. Es wird normalerweise PDF erzeugt; andere Optionen sind PS und DVI. Das sind alles Grafikformate, die keine Informationen zur Textgliederung (Überschrift, Absatz, Fußnote, Seitenzahl etc.) enthalten. Zudem ist nicht alles, was beim Nutzer als Text ankommt, in der Datei überhaupt als solcher codiert. Zwar gibt es viele PDF zu DOC/RTF-Konverter, aber die erstellen kein gegliedertes Dokument, sondern äffen die Positonierungen des Originals nach. Man emuliert also praktisch eine Grafikdatei im Zielformat. Da es aber immer notwendiger wurde, \LaTeXi{}-Dokumente vor allem für Webservices und Screenreader zu konfektionieren, wurden zahlreiche  Konverter entwickelt. Zwei Projekte sind heutzutage interessant und zeigen auch mit \archbib{} ordentliche Resultate:
\Paket{\LaTeXML{}} für HTML und \Paket{tex4ht} für HTML und allerlei XML-basierte Formate (EPUB für E-Books z.\,B.). Mit letzterem kann man ODT-Dateien erzeugen, die auch \App{MS~Word} lesen kann. Der Vorgang ist wie alles an \LaTeXi{} nicht so ganz einfach, aber er funktioniert soweit, daß man ihn nicht meiden muß. Wir widmen der Konvertierung noch ein eigenes Kapitel.

Der wesentliche Unterschied von \TeXi{}basierten Satzsystemen und WYSIWYG-Editoren besteht darin, daß bei \TeXi{} eine Quellcode-Datei zu einer Grafikdatei kompiliert wird. Die Quelldatei bleibt dabei unangetastet; man hat nach der Kompilierung zwei Dateien (i.\,d\,R. \Datei{jobname.tex} und \Datei{jobname.pdf}). Im Gegensatz dazu erzeugen WYSIWYG-Textverarbeiter die grafische Anzeige direkt aus der Quelle. Die Quelldatei (DOC, DOCX, RTF, RTFX, ODT etc.) ist auch gleichzeitig Ausgabedatei. Das hat Folgen auch für die Entwicklung von Zitier- und Bibliographiersoftware. Daß kommerzielle Bibliographierprogramme wie \App{Endnote} und {Citavi} verglichen mit dem kostenlosen \blx{} fast schon primitiv wirken, hat sicherlich nichts mit fehlender Kompetenz ihrer Schöpfer zu tun, sondern mit den Einschränkungen der Grundsysteme, auf die sie aufsetzen.

Es mag nun jeder für sich selbst entscheiden, ob ihm das den Lernaufwand wert ist. Eine geplante Dissertation dürfte es wohl sein, denn \blx{} ist ganz erheblich mächtiger als die \App{MS~Word}-Addons von \App{Citavi} oder \App{Zotero} und spart allein beim Korrekturlesen mehrere Tage Zeit.

\section{Semantische statt lokaler Auszeichnungen}
In \LaTeXi{} ist es meist falsch, Textauszeichnungen direkt in den Text zu setzen. Stellen sie sich folgendes Beispiel eines Textes vor, in dem fremdsprachige Ausdrücke und Werktitel kursiv gesetzt werden sollen:
\subsection*{FALSCH: lokale Auszeichnung}
\begin{lstlisting}
\documentclass[12pt]{scrartcl}
\begin{document}
Ein gutes Beispiel für einen \textit{locus amoenus} findet sich in den \textit{Metamorphosen} von Ovid.
\end{document}
\end{lstlisting}
Wenn man jetzt bei der Endredaktion auf den Gedanken kommt, daß die Werktitel doch besser in Anführungszeichen stünden, müßte man den gesamten Text durchgehen und die nicht eindeutigen Auszeichnungen einzeln ändern. Deshalb
\subsection*{RICHTIG: semantische Auszeichnung}
\begin{lstlisting}
\documentclass[12pt]{scrartcl}
\newcommand*{\Fremdsprache}[1]{\textit{#1}}
\newcommand*{\Werktitel}[1]{\textit{#1}}
\begin{document}
Ein gutes Beispiel für einen \Fremdsprache{locus amoenus} findet sich in den \Werktitel{Metamorphosen} von Ovid.
\end{document}
\end{lstlisting}
Hier würde man im selben Fall nur das \Befehl{Werktitel}-Kommando ändern. In WYSIWYG-Editoren sind semantische Auszeichnungen nur sehr eingeschränkt möglich. Die Nutzer greifen die zu formatierenden Stellen üblicherweise mit der Maus und ändern sie lokal. Es gibt zwar auch dort die Möglichkeit, Marken in den Text zu setzen und dann mit Makros zu formatieren, aber dieser Vorgang läßt sich nicht rückgängig machen, weil man keine geschützte Quelldatei hat, die vor den Eingriffen des Renderns der Grafik geschützt wäre. Für das Bibliographieren hat das auch Folgen, denn ein Bibliographierprogramm braucht Informationen über die Gestalt des Haupttextes. Manche Stile z.\,B. setzen das Literaturverzeichnis in eine geringere Schriftgröße als den Fließtext, weil Verzeichnisse nicht dessen hohen Lesbarkeitsanforderungen genügen müssen. In \LaTeXi{} gibt man die Schriftgröße normalerweise nur einmal absolut als Parameter der Dokumentenklasse an und beschreibt lokale Änderungen dann nur noch relativ (\Befehl{HUGE}, \Befehl{footnotesize} etc.). Die für die Berechnungen relevante Normgröße wäre selbst dann bekannt, wenn sie im Text immer geändert worden ist. In den Dokumentenformaten der WYSIWYG-Editoren fehlt eine solche Norm, weil alles nur lokal ausgezeichnet ist.

\section{Seitenaufbau}
Beim Zitieren und Bibliographieren braucht man Kenntnisse des konkreten Seitenaufbaus, darunter leicht veränderlicher Werte wie Seiten- und Fußnotenzähler. Es gibt z. B. Regeln, die besagen, daß man komprimierte Wiederholungszitate auf jeder neuen Seite erst einmal wieder voll ausschreiben soll. Dafür muß man wissen, ob sich der Seitenzähler seit dem letzten Zitat desselben Werkes geändert hat. Das geht schlecht, wenn man das Zitat beim Einsetzen direkt formatiert und damit seinen maschinenlesbaren Code vernichtet -- es sei denn, man kann wie der späte Mozart auch komplexere Werke ganz ohne Korrekturen niederschreiben. Mit den Fußnoten ergibt sich das Problem ganz konkret im geisteswissenschaftlichen RGK-Stil: ob man Wiederholungszitate mit \enquote{aao.}, \enquote{Ebd.} oder \enquote{(Anm.~15)} markiert, hängt davon ab, ob die Differenz des Fußnotenzählers zum letzten Zitat desselben Werkes 0, 1 oder viele beträgt.

\section{Textrevisionen}
Bei Textrevisionen müssen die Zitate verändert werden können. Wenn man ein Zitat entfernt, muß geprüft werden, ob es auch aus dem Literaturverzeichnis entfernt werden muß oder ob es nochmal vorkommt. Man muß aus dem Zitat eines einzelnen Werkes das mehrerer machen können. Zitatformen können sich ändern, wenn der Satzbau umgestellt wird, z.\,B. \enquote{lorem ipsum (Müller \& Meier 2019, 56)} zu \enquote{Müller und Meier (2019, 56) behaupten, dass lorem ipsum}. Und nicht zuletzt müssen auch Korrekturen in der Literaturdatenbank in den Text eingepflegt werden. Dafür ist es notwendig, daß im Quelltext die maschinenlesbaren Marken erhalten bleiben. Das ist wahrscheinlich der größte Vorteil einer separaten Quellcodedatei, die beim Rendern unangetastet bleibt.

\section{Noch ein Hinweis zu den Distributionen}
Da das Problem mit verschiedenen \TeXi-Distributionen in einer Nutzerreaktion zu \archbib{} auftauchte: Es ist egal, ob man \TeXi{} Live oder MiK\TeXi{} verwendet (andere wie z.\,B. Mac\TeXi{} satteln auf einer von diesen beiden auf). \TeXi{} Live ist etwas größer, während MiK\TeXi{} eine für Windowsnutzer gewohntere Benutzerführung hat. Wenn man an mehreren Computern arbeitet, muß man allerdings sehr darauf achten, daß man immer denselben Zustand der Distribution hat. \TeXi{} Live kann man täglich updaten, MiK\TeXi{} wöchentlich. Onlinedienste wie Overleaf oder ArXiv können das nicht. Es kann immer mal passieren, daß es in der Ladekette eines Paketes zu inkompatiblen Änderungen kommt. Onlinedienste brauchen aber langfristige Stabilität. Ähnliches gilt für die über Paketmanager wie \App{yum}, \App{APT}, \App{RPM} oder \App{dpkg} ausgelieferten Versionen \footnote{Die im Februar 2021 aktuelle \App{Linux}distribution \App{Debian}~10.8 z.\,B. arbeitete damals immer noch mit \TeXi{} 2018 und \archbib 2.1 vom Novemver 2018}. Auch die werden für gewöhnlich nur in längeren Abständen erneuert und sind mitunter auch nur Minimalinstallationen bzw. in mehrere thematische Pakete aufgeteilt. Wenn man auf mehreren Computern des gleichen Betriebssystems arbeitet, lassen sich beide Distributionen portabel auf USB-Sticks installieren. Da kann man dann auch gleich ein Backup der Distribution machen, falls nach einem Update etwas nicht mehr funktioniert.

\TeXi{} Live gibt es bis zur Version 2013 zurück auch als \App{Docker} Image.\footnote{\url{https://hub.docker.com/r/texlive/texlive}} Dabei handelt es sich um unmittelbar lauffähige Installationen auf einem \App{Linux}-Host, ähnlich einer Virtuellen Maschine, aber nicht völlig autonom vom Hostsystem. \App{Docker} läuft auch auf \App{Windows} 10 und höher. Für die Benutzung in Kombination mit graphischen Oberflächen ist \App{Docker} nicht gedacht.

\section{Unerläßlich für den Support: das Minimalbeispiel}\label{kap_mwe}
Im Internet gibt es sehr viele Orte, wo man Probleme mit \LaTeXi-Code besprechen kann. Der meistfrequentierte ist wohl die englischsprachige Internetseite \url{https://tex.stackexchange.com/}. Dort trifft man auf viele bekannte Experten. Deutschsprachige Foren sind \url{https://golatex.de/} und \url{https://texwelt.de/}. Ansonsten hilft häufig auch Googeln -- man ist selten der Erste, der das Problem hat oder eine bestimmte Fehlermeldung sieht.

\paragraph{Wichtig! Wichtig! Wichtig!} Wenn man Fragen auf diesen Seiten postet, sollte man unbedingt ein Minimalbeispiel (\url{https://minimalbeispiel.de/}) beifügen. Ein solches Minimalbeispiel oder MWE (\Englisch{minimal working example}) versucht, das Problem mit \textbf{so wenig Code wie möglich} zu reproduzieren. Man lädt vor allem nur die Pakete, die man unbedingt dazu braucht. Lauffähig muß es allerdings sein. Häufig führt alleine das Herstellen eines MWE dazu, daß man das Problem löst. Ein Minimalbeispiel für \blx{} oder \archbib{} sieht so aus:
\begin{lstlisting}
\documentclass[12pt]{article}
\usepackage[style=rgk-verbose]{biblatex}
\addbibresource{biblatex-examples.bib}

\begin{document}
Das ist ein Zitat\autocite{nietzsche:ksa1}.
\end{document}
\end{lstlisting}

Wenn man jetzt den Verdacht hat, daß \blx{} oder \archbib{} mit einem anderen Paket nicht korrekt zusammenwirkt, dann lädt man es und paßt den Ausgabetext entsprechend an. Nach dem kompilieren weiß man, ob der Verdacht richtig war.

Die Beispieldatenbank von \blx{} \Datei{biblatex-examples.bib} wird auch ohne Pfadangabe gefunden. Für die entsprechende \Datei{biblatex-archaeology-example.bib} gilt das leider nur auf MiK\TeXi. Will man eigene bibliographische Daten für das MWE bereitstellen, bietet sich die \Umgebung{filecontents} an\footnote{Vor September 2019 mußte man dafür noch das gleichnamige Paket laden.}. Damit kann man im Header Dateien einfügen, die bei der Kompilierung ausgegeben werden:
\begin{lstlisting}
\begin{filecontents}[overwrite]{\jobname.bib} 
@MISC{mwe,
	author = {Ingram Braun},
	title  = {MWE example},
	date   = {2020},
}
\end{filecontents}
\documentclass[12pt]{article}
\usepackage[style=rgk-verbose]{biblatex}
\addbibresource{\jobname.bib}

\begin{document}
Das ist ein Zitat\autocite{mwe}.
\end{document}
\end{lstlisting}

MWEs kann man auch benutzen, wenn man komplizierte Aufbauten (unregelmäßige Tabellen, Strukturgraphiken etc.) basteln oder überhaupt etwas ausprobieren will. Schon einfach, weil sie schneller kompilieren als umfangreiche Dokumente. Es ist vermutlich auch keine schlechte Idee, zum Lernen die ganzen Codefragmente in diesem Dokument mal in die MWE-Schablonen einzusetzen.

\chapter{\blx{} Grundlagen}\label{kap_blx{} }

\section{Konzept}\label{kap_concept}

Als Oren Patashnik 1985 \BibTeX{} entwarf,\autocite{patashnik_1994} stand er vor dem Problem, daß man mit \LaTeXi{} nicht gut sortieren kann. Deshalb schrieb er ein Hilfsprogramm in C, das mit Dateien \Datei{<style>.bst} konfiguriert werden kann. Der Ablauf war so, daß in einem erstem \LaTeXi-Lauf alle Zitationsschlüssel in der ohnehin vorhandenen Hilfsdatei \Datei{<jobname>.aux} gesammelt wurden. \BibTeX{} las sie aus und erstellte eine Datei \Datei{<jobname>.bbl}, in der die Zitate fertig mit \LaTeXi-Markup vorlagen. Ein zweiter \LaTeXi-Lauf fügte diese dann in das Dokument ein. Meistens war dann noch ein dritter \LaTeXi-Lauf nötig, um die in dem \Feld{crossreference}-Feld gefundenen Verweise aufzulösen. Im Laufe der Zeit enstanden viele Stile für spezielle Zwecke. Es zeigten sich aber auch immer mehr die Grenzen des Konzepts. Daß ich dasselbe Werk in verschiedenen Kontexten verschieden formatiert haben will, ist nicht vorgesehen -- das \LaTeXi-Markup in der bbl-Datei ist nicht mehr veränderlich. Die polnische Notation der bst-Dateien war mit bloßen \TeXi-kenntnissen nicht zu verstehen. Es gab zwar viele Stile für alle nur erdenklichen Zwecke, aber man konnte immer nur einen davon laden. Es ist deshalb z. B. nicht möglich, das Paket für kapitelweise Literaturverzeichnisse in einem beliebigen Stil ablaufen zu lassen.

Um 2005 herum beschloß Philip Lehman deshalb, einen weithehend frei programmierbaren Universalstil namens \blx{} zu entwickeln. Die Grundidee dabei: \BibTeX{} sollte nur noch die Sortierung erledigen. Alles andere sollte in \LaTeXi-Makros vorliegen, damit Nutzer mit durchschnittlichen \LaTeXi-Kenntnissen auf gewohnte Weise durch Definition neuer Makros oder Veränderung bestehender ihre Bedürfnisse umsetzen konnten. \blx{} kommt mit einer Sammlung verschiedener Varianten aller wesentlichen Stilfamilien (Numerisch, Autor/Jahr, Autor/Title, Fußnoten). Zudem vereinigte \blx{} zahlreiche Aufgaben, für die es vorher spezielle bst-Dateien gab, so daß sie mit jedem beliebigen \blx{} -Stil kombinierbar sind. Da in der bbl-Datei kein \LaTeXi-Markup mehr steht (es sei denn, es befand sich schon in der Datenbank), sind verschiedene Zitationen desselben Werks frei formatierbar. Bezahlt wurde das mit einer riesigen, schwer zu wartenden Codebasis, die trotz eines 400-Seiten-Handbuches auch deutliche Lücken in der Dokumentation aufweist. Zumal sein Schöpfer Philip Lehman -- offenbar ein Pseudonym -- seit 2012 wie vom Erdboden verschluckt ist. Zum Glück fanden sich immer wieder Freiwillige, die das Paket weiter gepflegt haben. Philipp Kime hat mit \Biber einen wesentlich leistungsstärkeren Ersatz für das in die Jahre gekommene \BibTeX{} erstellt. \blx{} wird z. Zt. hauptsächlich von Moritz Wemheuer gepflegt. \blx{} funktioniert grundsätzlich noch mit \BibTeX, allerdings sind viele Features nur mit \Biber nutzbar. 

Stellen Sie sich vor, Sie haben einen Text mit \blx{} -Zitaten in einer Datei \Datei{<jobname>.tex} geschrieben. Der grundlegende Workflow sieht so aus:
\begin{lstlisting}
$ pdflatex <jobname>
$ biber <jobname>
$ pdflatex <jobname>
\end{lstlisting}
Beim ersten \LaTeXi-Lauf werden alle Zitationsschlüssel gesammelt und mit \Biber-Konfigurationen in die Datei \Datei{<jobname>.bcf} geschrieben. Es warnt vor nichtaufgelösten Referenzen und erstellt ein dementsprechend unvollständiges PDF-Dokument. \Biber liest die relevanten Einträge anhand der Schlüssel in der \Datei{<jobname>.bcf} aus den bib-Dateien aus, bearbeitet sie gegebenfalls und schreibt sie sortiert in einem etwas abweichenden Format in eine Datei \Datei{<jobname>.bbl}. Beim zweiten \LaTeXi-Lauf werden die Zitiermarken und gegebenfalls die Literaturverzeichnisse anhand der Einträge aus der \Datei{<jobname>.bbl} erstellt und formatiert und dann das vollständige \Datei{<jobname>.pdf} erstellt. In dem Dokumentenverzeichnis finden sich noch mehr Hilfsdateien (mindestens \Datei{<jobname>.aux}, \Datei{<jobname>.log} und die Logdatei von \Biber \Datei{<jobname>.blg}). Aufbewahren muß man immer nur die Quelldateien (also ".tex und *.bib und ggf. Mediendateien); alles andere kann gefahrlos gelöscht werden. Oft muß es das: wenn ich im Dokument ein neues Zitat hinzufüge, ist das nicht in der \Datei{<jobname>.bbl} aufgelöst. Deshalb muß der erste \LaTeXi-Lauf wiederholt werden, indem man die Hilfsdateien löscht.

\subsection{Stile}\label{kap_stile}

Stile bestehen aus vier Dateiformaten: \Datei{<style>.bbx} enthält die Einstellungen für die Bibliographie, \Datei{<style>.cbx} für die Zitate, \Datei{<style>.dbx} enthält das Datenmodell und \Datei{*.lbx}-Dateien die sprachabhängigen Einstellungen.

\blx{} hat fünf Stilfamilien. Diese unterscheiden sich technisch sehr deutlich und können deshalb nicht vermengt werden.
\begin{itemize}
\item \Stil{numeric}: Numerische Stile zählen die Zitate einfach durch und ordnen das Literaturverezichnis nach dem Auftauchen im Text. Vom technischen Standpunkt aus die einfachste Art des Zitierens. Die nur aus einer fortlaufenden Nummer bestehenden Label müssen im Literaturverzeichnis wiederholt werden.
\item \Stil{alphabetic}: Im Grunde ein Autor/Jahr-Stil, aber da aus den Autorennamen Abkürzungen gebildet werden, die die Sortierreihenfolge ändern können, muß das Label im Literaturverzeichnis wiederholt werden.
\item \Stil{authoryear}: Solche Stile bilden Label aus den Autorennamen und dem Publikationdatum. Das Literaturverzeichnis ist dann nach dem Namen alphabetisch und als zweitem Kriterium nach dem Datum geordnet. Eine Wiederholung des Labels ist unnötig.
\item \Stil{authortitle}: Diese Stile bilden Label aus dem Autor und dem Titel, wobei die Label üblicherweise in Fußnoten geschrieben werden. Das Literaturverzeichnis ist nach dem Titel alphabetisch und als zweitem Kriterium nach dem Datum geordnet und benötigt keine Wiederholung der Label.
\item \Stil{verbose}: Diese Stile schreiben beim ersten Auftauchen ein Vollzitat in eine Fußnoten (deshalb die Bezeichnung \enquote{wortreich}) und brauchen daher überhaupt kein Literaturverzeichnis. Im Deutschen werden sie gerne als Fußnotenstile bezeichnet. Das ist irreführend, denn die Label anderer Stilfamilien lassen sich durchaus auch in Fußnoten schreiben.
\end{itemize}
Von diesen Stilen gibt es dann einige Varianten, die sich hauptsächlich durch Details bei der Produktion von Labeln unterscheiden (Trunkierung von Namens- oder Labelwiederholungen, Konkatenation mehrere Werke in einem Zitat, Vermeidung mehrdeutiger Labels etc.).

Diese Stile interagieren auf verschiedene Weise mit dem sie tragenden Text. Numerische, alphabetische und Autor/Jahr-Stile sind nicht dafür ausgelegt, über das Label und die Seitenzahlen hinaus zusätzlichen Text aufzunehmen. In den ersten beiden zitiert man u.\,U. man nur einzelne Kapitel, weshalb \BibTeX{} dafür einen eigenen Datentyp \Typ{chapter} hat, während \blx{} ein Feld \Feld{chapter} bereit stellt. Etwas anderes ist es, wenn Fußnoten ins Spiel kommen. Das sind im Prinzip Absätze -- nur halt nicht im Textfluß -- und die können beliebig mit Text gefüllt werden. Man sollte allerdings ein bißchen aufpassen, daß die Label noch klar als solche erkennbar sind.

Man lädt den Stil durch die Paketoption \Option{style}:
\begin{lstlisting}
\usepackage[style=numeric]{biblatex}
\end{lstlisting}
Mit Hilfe der Optionen \Option{citestyle} und \Option{bibstyle} kann man theoretisch verschiedene Stile zum Zitieren und für die Bibliographie laden. Sofern das nicht explizit vorgesehen ist, muß aber man schon Glück haben, daß das überhaupt funktioniert und dann noch sinnvolle Ergebnisse zeitigt. Da \Datei{<style>.bbx} und \Datei{<style>.cbx} einen anderen Stil erben können, kann es auch Stile geben, die nur eines von beiden bereitstellen..

Wenn man sich informieren will, welche zusätzlichen Stile es gibt, ist das Verzeichnis \href{https://www.ctan.org/tex-archive/macros/latex/contrib/biblatex-contrib/}{\Kbd{CTAN:macros/latex/contrib/biblatex-contrib/}} der geeignete Anlaufpunkt. Stand November 2020 sind dort 67 Stilpakete gelistet, von denen einige aber vermutlich mangels aktiver Pflege nicht mehr funktionieren. Man sieht aber schon beim Überfliegen, daß deutsche Geisteswissenschaften gut vertreten sind; vermutlich, weil diese vergleichsweise hohe typographische Ansprüche haben.

\subsection{Datenquellen}

\BibTeX-Datenbanken fügt man einem Dokument hinzu, indem man im Header den \Befehl{addbibresource} beliebig oft aufruft. Datenbanken im Dokumentenordner oder im Pfad \Datei{\%TEXMF/bibtex/bib/<Paket>/} kann man ohne Pfadangabe angeben. Es ist sogar möglich, URLs anzugeben, auch wenn es schwierig ist, sich dafür neine sinnvolle Anwendung vorzustellen.

\begin{lstlisting}
\addbibresource{biblatex-examples.bib}
\addbibresource{/path/to/references.bib}
\addbibresource{https://example.com/references.bib}
\end{lstlisting}

\subsection{Optionen}
\blx{} hat eine Unmenge von Paketoptionen. Vermutlich werden die wenigsten davon von Endanwendern benutzt werden, weswegen es wohl keinen Sinn ergibt, hier alle aufzulisten. Ich fasse sie in Funktionsgruppen zusammen, damit man weiß, welche Möglichkeiten man hat.
\begin{itemize}
\item Die ganzen \Kbd{<...>counter} und \Kbd{<...>tracker} nützen natürlich nur, wenn der gewählte Stil sie auch auswertet. Die in \cref{kap_stile} erwähnten Stilvarianten beruhen meist auf speziellen Kombinationen dieser Optionen. Mit \Option{citereset} kann man eine Gliederungsebene angeben, an der diese Werte zurückgesetzt werden.
\item Auch alles anderen Optionen, die unter \Englisch{internal} gelistet sind, sind eher etwas für Stilautoren. Das gilt auch für \Option{loadfiles}.
\item Es gibt auch eine ganze Reihe von Optionen für das Datum. Ich gehe in \cref{kap_datum} kurz darauf ein.
\item \Kbd{min<...>names} und \Kbd{max<...>names} steuern die Trunkierung von Namenslisten. Maximum ist der Schwellwert, bis zu dem die Liste komplett ausgedruckt wird. Minimum ist die Zahl der Namen, die bei einer trunkierten Liste angezeigt wird. Für einfache Listen gibt es nur die globale Einstellung \Option{minitems} und \Option{maxitems}.
\item Man kann die gleichnamigen Felder für Identifier mit \Kbd{true} oder \Kbd{false} an- oder abschalten: \Option{isbn}, \Option{url} (nicht bei \Typ{online}), \Option{eprint}, \Option{doi}.
\item Es gibt eine Reihe von Optionen zum Sortieren. Interessant ist \Option{sortcites}, mit der man bei der Zitation mehrerer Werke in einem Kommando diese sortiert. Das wird allerdings nur funktionieren, wenn die Einzelwerke keinen Text in den Prä- oder Postnoten haben. \Option{sortlocale} ist von Haus so eingestellt, daß sie die Sortierreihenfolge der Hauptsprache des Dokuments auswählt. Das kann unerwünscht sein, wenn man den z.\,B. englische Texte in deutschen Zeitschriften veröffentlichen möchte.
\item Mit der Option \Option{backref} und ihren Verwandten kann man Rückverweise im Literaturverzeichnis anlegen. Dort steht dann also, auf welchen Seiten das Zitat steht.
\item Wenn das \Paket{hyperref}-Paket geladen ist, erzeugt \blx{} klickbare Links. Mit der Option \Option{hyperref} kann man das beeinflussen oder abschalten.
\item \Option{autocite} und \Option{autopunct} steuern das Verhalten von \Befehl{autocite} (s.~\cref{kap_zitat}).
\item \Option{language}, \Option{clearlang} und \Option{autolang} sind nur bedeutsam, wenn Datenbankeinträge mit \Feld{langid}-Feld vorhanden sind.
\item \Option{block} und \Option{locallabelwidth} steuern Abstände in der Bibliographie.
\item \Option{refsection} und \Option{refsegment} werden in \cref{kap_biblio} erklärt.
\item \Option{abbreviate} wird in \cref{kap_local} erklärt.
\item Mit \Option{backend} kann man das Sortierprogramm auswählen. \Biber ist voreingestellt, nur für die beiden \BibTeX-Varianten muß sie angegeben werden. \Option{bibwarn} gibt an, ob \Biber-Warnungen als \LaTeXi-Warnungen ausgegeben werden.
\item \Option{mcite} und \Option{natbib} laden Module für die Zitierkommandos zweier wichtiger \BibTeX-Stile.
\item Mit \Option{notetype} kann man steuern, ob Fußnotenzitate als Fußnoten, Endnoten oder beides ausgegeben werden.
\item \Option{texencoding} und \Option{bibencoding} braucht man für unterschiedliches Encoding von \Datei{*.tex} und \Datei{*.bib}. Wenn beides UTF-8 ist, sind sie unnötig. \Option{safeinputenc} weist \Biber an, Unicode-Zeichen in ASCII-Notierung zu übersetzen. Das kann unter \pdfLaTeX{} nötig sein, weil \Paket{inputenc} nicht alle Unicode-Zeichen kennt.
\item \Option{mincrossrefs} und \Option{minxrefs} sind Schwellwerte für die Felder \Feld{crossref} und \Feld{xref}. Werden aus einen Sammelwerk entsprechend viele Aufsätze zitiert, wird das Sammelwerk einzeln in das Literaturverzeichnis aufgenommen und die Aufsätze auf dieses verwiesen.
\end{itemize}

\subsection{Grenzen von \blx{} }
Natürlich sind den Fähigkeiten auch von \blx{} gewisse Grenzen gesetzt. Beim Laden von Stilen werden viele interne Makros des \blx{} -Kerns angepaßt, die dann so nicht mehr mit anderen Stilen verwendet werden können. Deshalb ist es nicht möglich, Dokumente mit verschiedenen Stilen in einer Datei zu schreiben. Das betrifft z. B. Zeitschriften, die sowohl Autor/Jahr- als auch Fußnotenstile nebeneinander verwenden. Der Workaround wäre hier, die einzelnen Artikel separat zu erstellen und den Seitenähler manuell anzupassen. Dann kann man sie mit einem Paket wie \Paket{pdfpages} zusammenkleben. Vermutlich ist das bei Zeitschriften und Sammelwerken ohnehin eine übliche Vorgehensweise, um Sonderdrucke mit eigener Titelei zu erstellen.

Schwierig ist auch alles, was mit Mustererkennung zu tun hat. Das in Perl geschriebene Biber ist dafür eigentlich wunderbar ausgestattet, kann aber kein \LaTeXi{} parsen. \LaTeXi{} selbst hingegen hat nur sehr eingeschränkt Werkzeuge dafür, insbesondere hat es keine Regulären Ausdrücke zur Erkennung von Textmustern. Bemerkbar macht sich das z. B. im Falle der Sequentes, also Seitenzahlen wie 21f. oder 23ff. Um die zu erzeugen, muß man sehen, ob ein Ausdruck als Differenz von Start- und Endseite interpretierbar ist. So etwas ist überraschend kompliziert, denn die Seiten können z,\,B. als römische Zahlen codiert sein, die wiederum in Unicode in verschiedenen Varianten vorliegen. Das Trennzeichen kann ein Binde-, Halbgeviert- oder Geviertstrich sein, mit oder ohne Leerzeichen. Die Nicht-ASCII-Zeichen können als \LaTeXi-Makros oder Unicodepoints codiert sein etc. Tatsächlich rechnet Biber -- soweit möglich -- die Differenz für das Feld \Feld{pages} aus. Die meisten Seitenzahlen stehen aber in den Postnoten der Zitationskommandos -- und die sieht Biber nicht. Es hat diese Funktion früher mal auch in \blx{} gegeben; sie wurde aber wegen ihrer Fehleranfälligkeit wieder gestrichen.

\subsection{Funktionen von \Biber}\label{kap_biber}

\Biber wird hauptsächlich über \blx{} gesteuert, indem die Einstellungen über die \Datei{<jobname>.bcf} durchgereicht werden. Deshalb kann \Biber im normalen Workflow für Dokumente auch ganz ohne Optionen aufgerufen werden. Eine wichtige Option ist \Option{--trace}, die ein sehr detailliertes Logging in der \Datei{<jobname>.blg} veranlaßt. Es kann aber noch weit mehr als nur die \Datei{<jobname>.bbl} erstellen. Ein typisches Problem ist es z.\,B., alle Einträge eines Dokuments zu extrahieren und daraus eine neue Datenbank zu erstellen:
\begin{lstlisting}
$ <engine>latex <jobname>
$ biber --output-format=bibtex <jobname>
\end{lstlisting}
Das erstellt jetzt eine Datenbank \Datei{<jobname>_biber.bib}. So man möchte, kann man durch Hinzufügen der Option \Option{--output-resolve} die Vererbung von Daten zwischen Einträgen auflösen.

Wenn Biber mit der \Datei{<jobname>.bcf} aufgerufen wird, erhält es auch die in der Datei \Datei{<style>.dbx} gespeicherten Informationen über Dokumententypen und Felder. Z.\,B. müssen Datumsfelder, Listen und Namen geparst werden, damit ihre Elemente separat aufrufbar sind. Im Datenmodell steht, welche Felder das sind. Nun gibt es aber auch Szenarien, in denen man die Fähigkeiten von \Biber nutzen will, ohne daß ein Dokument verarbeitet wird. Dafür gibt es den sogenannten Werkzeugmodus, den man mit der Option \Option{--tool} aufruft. Der Haken dabei ist, daß \Biber jetzt ja auch das Datenmodell aus der \Datei{*.dbx}-Datei nicht zu sehen bekommt. Deshalb gibt es eine \Datei{bibertool.conf}, in der eine Kopie des Modells im XML-Format gespeichert ist. Jetzt werden aber Felder, die es nicht kennt oder deren Inhalt es nicht validieren kann, einfach ignoriert. Wenn man ein Datenmodell für einen bestimmten Stil braucht, produziert man mit LaTeX-Lauf eine \Datei{*.bcf}. Dort befindet sich das Datenmodell in der Gruppe \Kbd{<bcf:datamodel>...</bcf:datamodel>} (die spitzen Klammern sind in diesem Fall Begrenzer von XML-Elementen). Die Anweisung
\begin{lstlisting}
$ biber --tool-config
\end{lstlisting}
verrät, wo die aktuell in Gebrauch befindliche \Datei{bibertool.conf} abgelegt ist. Machen Sie davon eine Kopie, tauschen Sie in dieser die \Kbd{<datamodel>...</datamodel>}-Gruppe aus, entfernen Sie die Präfixe für den BCF-Namensraum (\Kbd{bcf:}). Dasselbe müssen Sie für die \Kbd{<bcf:inheritance>...</bcf:inheritance>}-Gruppe tun, die die Feldnamen für die Vererbungsziele angibt. Da \Biber mit jeder Version sein Konfigurationsformat ändert, muß man dieses Procedere nach jedem \Biber-Update wiederholen. Dann rufen Sie Biber im Toolmodus künfig mit der Option \Option{-g}\Kbd{ "/path/to/bibertool-copy.conf"} auf.

\begin{lstlisting}
$ biber --tool --output-encoding=ascii <file>.bib
\end{lstlisting}
Das erstellt aus einer UTF-8-codierten Datenbank eine \Datei{<file>_bibertool.bib}, in der alle Zeichen höher als US-ASCII in \LaTeXi-Makros umgewandelt sind, soweit \Biber{} dafür Makros kennt -- unbekannte Zeichen werden markiert. Für den umgekehrten Vorgang gibt man \Kbd{UTF-8} an (oder nur \Option{-U}). Es gibt auch noch weitere Encodings, die man auch mit \Option{--input_encoding} angeben kann, falls man eine Datenbank konvertieren will. Das ist vor allem interessant, wenn man Datenbanken aus OPACs oder Google Books etc. pp. importieren will, da deren Implementierung meist noch aus Zeiten stammt, wo UTF-8 noch kein ubiquitärer Standard war. Es gibt noch eine ganze Reihe von Optionen, mit denen man Datenbanken formatieren und validieren kann. Das Sortieren erfordert weitere Anpassungen der Konfigurationsdatei, ist aber bei Quelldatenbanken im Allgemeinen auch nicht sinnvoll.

Diese Abhängigkeit des Toolmodus von dem Datenmodell ist nicht ganz unproblematisch. In der Datenbank könnten sich Eigenschaften verschiedener Stile befinden, die sich vielleicht sogar gegenseitig ausschließen. Und auch Drittanbietersoftware wie Literaturverwaltungen könnten eigene Felder für den internen Gebrauch setzen. Insofern eignet sich \Biber auch im Toolmodus nicht zur Datenbankverwaltung, sondern nur für begrenzte Aufgaben wie etwa das Erstellen dokumentenspezifischer Datenbanken zur Weitergabe mit den Quellen. Dafür kommt man wahrscheinlich häufig besser weg, wenn man ein MWE mit \Befehl{nocite}\Kbd{\detokenize{{*}}} macht und das wie oben als \Datei{*.bib} ausgeben läßt, weil dann die Konfiguration im Hintergrund erstellt wird. Allerdings werden dann auch die Eingabefilter (Sourcemaps) der Stile ausgeführt.

\section{Datenerfassung}

\subsection{Das Dateiformat}\label{kap_fileformat}

Obacht! \BibTeX{} bezeichnet sowohl das Programm als auch das Dateiformat.

Datenbanken im \BibTeX-Format hat vermutlich jeder schon einmal gesehen. Sie haben immer die Dateiendung \Datei{bib} und die folgende Struktur:
\begin{lstlisting}
@misc(example1,
    author = "Thomas Schneider and Barbara Schulze",
    title = "Das ist ein Titel",
    publisher = "Titelmühle Press and Hansen und Hartmann",
    date = "1988",)
\end{lstlisting}
In der ersten Zeile stehen der Dokumententyp (nach dem \symbol{64}) und zwischen der geschweiften Klammer und dem Komma der eindeutige Schlüssel, den man den Zitierkommandos von \blx{} übergeben muß. Man kann in die Felder beliebigen \LaTeXi-Code schreiben, sollte aber daran denken, daß einige Felder von einem externen Sortierprogramm gelesen werden müssen, das kein \LaTeXi{} versteht. Man kann auch beliebig neue Dokumententypen und Felder erfinden, allerdings werden die von den vorhandenen Stilen nicht verstanden und ignoriert, sofern man keine Aliase definiert. \BibTeX{} kennt drei Datentypen: Felder, Listen und Namen. Das Trennzeichen in Listen und Namen ist \Kbd{and}. Dokumententypen, Feldnamen und Trennzeichen können groß oder klein geschreiben werden. Als Feldbegrenzer sind auch geschweifte Klammern zulässig. Ganzzahlen brauchen keine Feldbegrenzer. Den obigen Eintrag kann man auch so schreiben, ohne daß sich etwas ändert:
\begin{lstlisting}
@MISC{ example1,
    AUTHOR = {Schneider, Thomas AND Schulze, Barbara},
    TITLE = {Das ist ein Titel},
    PUBLISHER = {Titelmühle Press AND Hansen und Hartmann},
    DATE = 1988, }
\end{lstlisting}
Wenn in Namen oder Listen das Trennzeichen in den Einträgen vorkommt, muß man es mit geschweiften Klammern schützen:
\begin{figure}[H]
\begin{tabular}{ll}
\NamenDemo{intro:name:16}
\end{tabular}
\end{figure}

\subsection{Dokumententypen}
Nicht alle Dokumententypen, die \blx{} definiert, werden von den Standardstilen genutzt. Ich beschränke mich hier in \cref{tab:doctypes} auf die tatsächlich unterstützten. Wer spezielle Stile verwendet, wird in den Handbüchern Erklärungen zu den Erweiterungen finden. Jeder Dokumententyp hat sogenannte Pflichtfelder und optionale Felder. Allerdings dürfen durchaus auch die Pflichtfelder fehlen, denn sonst könnte man ja keine Werke ohne Verfasser oder Publikationsdatum zitieren. Näheres dazu findet sich in \cref{kap_felder}.

Bei einigen Dokumententypen wird man kaum Unterschiede feststellen. U.\,U. sind sie tatsächlich nur als Aliase implementiert. Das gilt für die mehrbändigen Typen (\Typ{mv\textellipsis})-Varianten und ihre Grundformen, für \Typ{supp...} und \Typ{in...} bzw. \Typ{article}, für \Typ{book}, \Typ{manual} und \Typ{booklet} sowie für alles, was mit Sammelwerken zu tun hat (\Typ{proceedings}-, \Typ{collection}- und \Typ{reference}-Gruppen). Es kann aber sein, daß Stile von solchen Feinunterscheidungen Gebrauch machen. \archbib{} z.\,B. unterscheidet \Typ{inreference} für Lexikonartikel tatsächlich von \Typ{incollection} und \Typ{inproceedings}.

\newcommand{\Tabellenkopf}{
\rowcolor{zebraodd}
\textbf{Typ} &
\textbf{\normalsize Erläuterung} &
\textbf{\normalsize \enquote{Pflichtfelder}}
\\\toprule}
\newlength{\ErsteSpalte}\setlength{\ErsteSpalte}{9em}

\begin{Zebratabelle}
\begin{xltabular}{\linewidth}{p{\ErsteSpalte}
LL}
\rowcolor{zebraodd}
\caption[Dokumententypen von \blx{} ]{Dokumententypen von \blx{} }
\label{tab:doctypes} % must be after \caption
\\
\Tabellenkopf
\endfirsthead
\rowcolor{zebraodd}
\multicolumn{3}{c}{{\tablename\ \thetable{} (Fortsetzung)}} \\
\Tabellenkopf
\endhead

\rowcolor{zebraodd}
\multicolumn{3}{r}{{\itshape Fortsetzung auf der nächsten Seite}}
\endfoot

\bottomrule
\endlastfoot

\Typ{article} & Artikel in Zeitschriften & \Feld{author}, \Feld{title}, \Feld{journaltitle}, \Feld{date} \\
\Typ{book} & Monographie (kein Sammelwerk) & \Feld{author}, \Feld{title}, \Feld{date} \\
\Typ{mvbook} & wie \Typ{book}, aber mehrbändig & \Feld{author}, \Feld{title}, \Feld{date} \\
\Typ{inbook} & Teil von \Typ{book} oder \Typ{mvbook} mit eigenem Titel:z.\,B., wenn eine Monographie einen Aufsatz eines anderen Autors enthält, wenn eine Monographie einen Aufsatz eines anderen Autors enthält & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{bookinbook} & ein ursprünglich selbstständiges Buch, das jetzt ein einem anderen \Typ{book} oder \Typ{mvbook} wieder abgedruckt ist z.\,B. in Quellensammlungen & ? \\
\Typ{suppbook} & Supplement in \Typ{book} oder \Typ{mvbook} & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{booklet} & wie \Typ{book}, aber ohne Verlag & \Feld{author}/\Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{collection} & Sammelwerk -- Vorsicht: keine aus Veranstaltungen (Konferenzen, Ausstellungen) hervorgegangenen Werke! & \Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{mvcollection} & wie \Typ{collection}, aber mehrbändig & \Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{incollection} & Aufsatz in \Typ{collection} oder \Typ{mvcollection} & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{suppcollection} & Supplement in \Typ{collection} oder \Typ{mvcollection} (Vor-, Nachwort etc.) & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{manual} & Handbücher bzw. Dokumentationen für Geräte, Software, Laborausstattung etc. & \Feld{author}/\Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{misc} & wenn nichts anderes paßt & \Feld{author}/\Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{online} & Onlineressourcen & \Feld{author}/\Feld{editor}, \Feld{title}, \Feld{date}, \Feld{url} \\
\Typ{patent} & Patentschriften & \Feld{author}, \Feld{title}, number, \Feld{date} \\
\Typ{periodical} & Zeitschriftenheft & \Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{suppperiodical} & für Inhalte von Zeitschriften ohne Werktitel (Rubriken, Leserbriefe, Familienanzeigen etc.) & \Feld{author}, \Feld{title}, \Feld{journaltitle}, \Feld{date} \\
\Typ{proceedings} & Sammelwerk, das aus Veranstaltung (Konferenz, Ausstellung) hervorgegangen ist & \Feld{title}, \Feld{date} \\
\Typ{mvproceedings} & wie \Typ{proceedings}, aber mehrbändig & \Feld{title}, \Feld{date} \\
\Typ{inproceedings} & Aufsatz in \Typ{proceedings} oder \Typ{mvproceedings} & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{reference} & Enzyklopädien, Wörterbücher, Lexika & \Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{mvreference} & wie \Typ{reference}, aber mehrbändig & \Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{inreference} & Eintrag in \Typ{reference} oder \Typ{mvreference} & \Feld{author}, \Feld{title}, \Feld{booktitle}, \Feld{date} \\
\Typ{report} & Technische oder Forschungsberichte, Whitepapers (hier sollten der Typ und die herausgebende Organisation angeben werden) & \Feld{author}, \Feld{title}, \Feld{type}, \Feld{institution}, \Feld{date} \\
\Typ{set} & Liste von Datenbankeinträgen (ist hauptsächlich für numerische Stile gedacht) & --- \\
\Typ{thesis} & Examensschrift (hier sollten der Typ und die prüfende Hochschule angeben werden) & \Feld{author}, \Feld{title}, \Feld{type}, \Feld{institution}, \Feld{date} \\
\Typ{unpublished} & unpubliziert & \Feld{author}/\Feld{editor}, \Feld{title}, \Feld{date} \\
\Typ{xdata} & ein Container, um Daten an andere Einträge zu vererben -- nicht zum eigenständigen Zitieren gedacht! & --- \\
\end{xltabular}
\end{Zebratabelle}

Es gibt noch drei besondere Datentypen von technischer Bedeutung:
\begin{itemize}
\item \Typ{comment} Um Kommentare in die Datenbank zu schreiben. Ich habe diesen Typ noch nie in freier Wildbahn angetroffen. Üblicherweise macht man das mit dem \%-Zeichen wie in \LaTeXi{} auch. Man muß sich ohnehin vergegenwärtigen, daß bei der Verarbeitung die Position solcher Kommentare geändert werden kann. Wer Anmerkungen zu bestimmten Einträgen aufbewahren will, muß die dafür vorgesehenen Felder (\Feld{abstract}, \Feld{note}, \Feld{addendum}, \Feld{howpublished}) benutzen.
\item \Typ{string} deklariert Ersetzungstext -- z.\,B. Zeitschriften- und Serientitel, die voll oder abgekürzt zitiert werden können.
\begin{lstlisting}
@STRING(ZAngewString = {Zeitschrift für Angewandte Stringtheorie})
@PERIODICAL(example-string1,
    journaltitle = ZAngewString,)
@BOOK(example-string2,
    series = "Beihefte zur " # ZAngewString # { und ihrer Vorgänger},)
\end{lstlisting}
Soll der String ein komplettes Feld ersetzen, verzichtet man auf Feldbegrenzer. das zweite Beispiel zeigt, wie Ersetzungstext mit Hilfe des Trennzeichen \Kbd{and} in Text hineingestzt werden kann.
\item \Typ{preamble} kann Anweisungen für den Dokumentenheader aufnehmen. Ein typisches Szenario ist folgendes: Im Titel eines Werkes kommen Anführungsstriche vor. Die würde man natürlich gerne kontext- und sprachsensitiv mit dem \Paket{csquotes}-Paket setzen(\Befehl{enquote}). Andererseits ist in einer gemeinsam genutzten Projektdatenbank nicht klar, ob jeder dieses Paket wirklich laden will. Jetzt kann man so etwas tun:
\begin{lstlisting}
@PREAMBLE(\providecommand*{\enquote}[1]{"#1"})
@MISC(
    title = {Die sogenannten \enquote{Anführungszeichen} als technisches Problem},)
\end{lstlisting}
\Befehl{providecommand*} ist wie \Befehl{newcommand*}, tut aber nichts, wenn das Kommando schon vorhanden ist. Ist \Paket{csquotes} geladen, tut es nichts. Wenn nicht, ummantelt es sein Argument mit amerikanischen Anführungszeichen. Man könnte auch \Befehl{usepackage} hier unterbringen, wenn man auf spezielle Befehle aus einem bestimmten Paket angewiesen ist.
\end{itemize}

\subsection{Die Felder}\label{kap_felder}

Die Anzahl möglicher Felder ist in \BibTeX{} praktisch unendlich. Allerdings müssen Felder, die von \BibTeX{} oder \Biber gedruckt oder sonstwie verarbeitet werden sollen, diesen bekannt gemacht werden. Es spricht aber nichts dagegen, daß man persönliche Notizen in Phantasiefelder schreibt. Man sollte nur beachten, daß die Feldnamen auf die 26 Alphabetbuchstaben beschränkt sind. Die \BibTeX-Stile hatten teilweise andere Dokumententypen und Feldnamen (z.\,B. \Feld{address} statt \Feld{location}, \Feld{school} statt \Feld{institution}). Sie werden in \blx{} als Aliase behandelt.

In \cref{kap_fileformat} wurde schon angedeutet, daß es vier Datentypen für Felder gibt: Listen, Namen, Ganzzahlen und Text. Listen und Namen können mehrere Elemente haben, die durch das Trennzeichen \Kbd{and} separiert werden. Ganzzahlen brauchen in der Datenbank keine Feldbegrenzer, Text schon. Schon in \BibTeX{} gab es das Feld {\Feld{crossref}, daß einen speziellen Text enthielt, nämlich einen Schlüpssel eines anderen Eintrags. Dadurch konnten unselbstständige Typen (Artikel in Zeitschriften und Sammelwerken) den sie enthaltenden Einträgen zugeordnet werden, so daß diese in der Datenbank nur einmal erfaßt werden müssen. \blx{} erweitert das enorm und definiert eine ganze Reihe von Textfeldern, die ihren Inhalt auf spezielle Weise auswerten. Die folgende Liste ist von der in der \blx{} -Dokumentation aus Verständnisgründen leicht verschieden.
\begin{itemize}
\item \Kbd{Listen} sind Aufzählungen, die durch das Trennzeichen \Kbd{and} separiert werden. Typische Beispiele sind der Verlagsort (\Feld{location}) oder der Verlag (\Feld{publisher}).
\item \Kbd{Namen} sind Listen mit dem Trennzeichen \Kbd{and}, aber die Elemente können in einzelne Namensbestandteile geparst werden (s.~\cref{{kap_names}}).
\item \Kbd{CSV} sind Listen, die das Komma als Trennzeichen benutzen.
\item \Kbd{Ganzahlen} brauchen in der Datenbank keine Feldbegrenzer. Sofern Textfelder nur Ganzzahlen beinhalten, kann man dieses Format benutzen.
\item \Kbd{Textfelder}\footnote{In der \blx{} -Dokumentation werden Textfelder als \Englisch{literal} bezeichnet. Da es auch noch den Datentyp \Englisch{verbatim} gibt, was beides zu \enquote{wörtlich} übersetzt, verwende ich hier die Übersetzung \enquote{Text}.}\label{fn:literal} werden meistens wörtlich ausgedruckt.
\item \Kbd{Schlüssel} enthält den Schlüssel eines anderen Datenbankeintrags.
\item \Kbd{Schlüsselliste} wie \Kbd{Schlüssel}, aber als kommaseparierte Liste mehrerer Einträge.
\item \Kbd{Wörtlich}\footref{fn:literal} In diesen Feldern müssen auch geschützte \TeXi-Zeichen wörtlich ausgegeben werden. Daher werden in diesen Feldern keine Makros expandiert. Das trifft vor allem auf Identifier zu (\Feld{url}, \Feld{doi} etc.), wo man \Kbd{\detokenize{\~@\#}} o.\,ä. braucht.
\item \Kbd{Datum} für Felder mit Datum nach ISO8601-2. \Biber teilt diese Felder in ihre Bestandteile auf, die dann jeweils eine Ganzzahl beinhalten. Näheres s.~\cref{kap_datum}.
\item {Zahlenbereiche} \Biber parst diese Felder als \Kbd{von - bis} und ersetzt das Trennzeichen durch \Befehl{bibrangedash}. Typisch vor allem für das \Feld{pages}-Feld unselbstständiger Dokumententypen.
\item \Kbd{Muster}: hier wird ein Wert aus einer Reihe vorgegebener Muster verlangt. Ein Beispiel ist \Feld{gender}, mit dem Numerus und Genus von Pronomen gesteuert werden.
\item \Kbd{Lokalisation} erwartet einen Lokalisationsschlüssel, der als Platzhalter für einen Ausdruck der aktuellen Dokumentensprache dient.
\end{itemize}

Mit zunehmenden Funktionsumfang ist die Zahl der von \blx{} verarbeiteten Felder ziemlich groß geworden. Aber erstmal braucht man davon nur einige, weil wohl kaum ein Stil alle Features nutzt, und dann gibt es auch dort stellenweise eine Systematik, die das Memorieren der Feldnamen erleichtert.

\begin{itemize}
\item \Feld{title}, \Feld{maintitle} und \Feld{booktitle} haben jeweils ein Feld für einen Untertitel (\Feld{subtitle}, \Feld{mainsubtitle}, \Feld{booksubtitle}) und für einen Titelzusatz (\Feld{titleaddon}, \Feld{maintitleaddon} und \Feld{booktitleaddon}). Der Unterschied zwischen Untertitel und Titelzusatz wird in \archbib{} bedeutsam.
\item Mit \Kbd{book<feld>} werden Feldnamen von Sammelwerken in unselbstständigen Typen gebildet, weil die Felder ohne Präfix dort schon besetzt sind: \Feld{bookauthor}, \Feld{booktitle}, \Feld{booksubtitle}, \Feld{booktitleaddon}, \Feld{bookpagination}.
\item Einen Unterschied zwischen \Feld{title} bzw \Feld{booktitle} einerseits und \Feld{maintitle} andererseits hat man vor allem dann, wenn eine Bandnummer dazwischen steht: \textellipsis  Maintitle Bd. 2: [Book]Title \textellipsis
\item Zu einigen Namensfeldern \Kbd{<name>} gibt es Felder \Kbd{<name>type}, in dem man einen Lokalisationsschlüssel für dessen Rolle unterbringen kann (Herausgeber, Bearbeiter, Übersetzer etc.).
\item Datumsfelder enden normalerweise immer auf \Kbd{date}: \Feld{date}, \Feld{urldate}, \Feld{origdate} etc.
\item Wenn bei Übersetzungen oder Nachdrucken Daten des Originalwerks genannt werden sollen, beginnen die relevanten Feldnamen mit \Kbd{orig}: \Feld{origdate}, \Feld{origtitle}, \Feld{origlanguage}, \Feld{origlocation}, \Feld{origpublisher}.
\end{itemize}

\cref{tab:stdfields} enthält die Datenfelder, also solche, die von den Stilen für die jeweiligen Dokumententypen über das Datenmodell unterstützt werden können (oder auch nicht). Benutzer von \archbib{} sollten sich die mit \Wichtig{} gekennzeichneten Felder anschauen. Ob die anderen verarbeitet werden, hängt davon ab, ob der von \blx{} vererbte Code das tut, wobei ich das nicht teste.

\renewcommand{\Tabellenkopf}{
\rowcolor{zebraodd}
 & 
\textbf{Feld} &
\textbf{\normalsize Datentyp} &
\textbf{\normalsize Erläuterungen}
\\\toprule}
\setlength{\ErsteSpalte}{8.5em}
\newlength{\ZweiteSpalte}\setlength{\ZweiteSpalte}{7em}

\begin{Zebratabelle}
\begin{xltabular}{\linewidth}{p{1em}p{\ErsteSpalte}p{\ZweiteSpalte}L}
\rowcolor{zebraodd}
\caption[Datenfelder von \blx{} ]{Datenfelder von \blx{} }
\label{tab:stdfields} % must be after \caption
\\
\Tabellenkopf
\endfirsthead
\rowcolor{zebraodd}
\multicolumn{4}{c}{{\tablename\ \thetable{} (Fortsetzung)}} \\
\Tabellenkopf
\endhead

\rowcolor{zebraodd}
\multicolumn{4}{r}{{\itshape Fortsetzung auf der nächsten Seite}}
\endfoot

\bottomrule
\endlastfoot

 & \Feld{abstract} & Text & Abstrakt \\
 & \Feld{addendum} & Text & beliebiger Zusatz am Ende eines Werks \\
 & \Feld{afterword} & Name & Verfasser des Nachworts \\
 & \Feld{annotation} & Text & Kommentar (in kommentierten Bibliographien) \\
 & \Feld{annotator} & Name & Verfasser  \\
\Wichtig & \Feld{author} & Name & Autor(-en) \\
\Wichtig & \Feld{authortype} & Lokalisation & Rolle des Autors \\
\Wichtig & \Feld{bookauthor} & Name & Autor(-en) von Sammelwerken \\
\Wichtig & \Feld{bookpagination} & Lokalisation & Art der Seitenzählung (Paragraphen, Spalten etc.) \\
\Wichtig & \Feld{booksubtitle} & Text & Untertitel eines Sammelwerks \\
\Wichtig & \Feld{booktitle} & Text & Titel eines Sammelwerks \\
\Wichtig & \Feld{booktitleaddon} & Text & Titelzusatz eines Sammelwerks \\
 & \Feld{chapter} & Text & Kapitel oder Abschnitt eines größeren Werks \\
 & \Feld{commentator} & Name & Kommentator einer kommentierten Ausgabe \\
\Wichtig & \Feld{date} & Datum & Publikationsdatum \\
\Wichtig & \Feld{doi} & wörtlich & \Englisch{Digtal Object Identifier} (DOI) \\
\Wichtig & \Feld{edition} & Ganzzahl oder Text & Auflage \\
\Wichtig & \Feld{editor} & Name & Herausgeber \\
 & \Feld{editora} & Name & weitere Herausgeber \\
 & \Feld{editorb} & Name & weitere Herausgeber \\
 & \Feld{editorc} & Name & weitere Herausgeber \\
 & \Feld{editortype} & Lokalisation & Rolle des Herausgebers \\
 & \Feld{editoratype} & Lokalisation & Rollen weiterer Herausgeber \\
 & \Feld{editorbtype} & Lokalisation & Rollen weiterer Herausgeber \\
 & \Feld{editorctype} & Lokalisation & Rollen weiterer Herausgeber \\
 & \Feld{eid} & Text & Elektronischer Identifier eines Zeitschriftenaufsatzes \\
\Wichtig & \Feld{entrysubtype} & Text & Spezifizierer des Dokumententyps \\
\Wichtig & \Feld{eprint} & wörtlich & ID eines elektronischen Dokuments \\
 & \Feld{eprintclass} & Text & Weitere Angaben zu \Feld{eid} \\
 & \Feld{eprinttype} & Text & Weitere Angaben zu \Feld{eid} (v. a. die ausgebende Institution) \\
\Wichtig & \Feld{eventdate} & Datum & Veranstaltungsdatum \\
 & \Feld{eventtitle} & Text & Veranstaltungstitel \\
 & \Feld{eventtitleaddon} & Text & Zusatz zu Veranstaltungstitel \\
 & \Feld{forword} & Name & Verfasser des Vorworts \\
 & \Feld{holder} & Name & Halter eines Patents \\
\Wichtig & \Feld{howpublished} & Text & nähere Information zu ungewöhnlichen Publikationsformen \\
 & \Feld{indextitle} & Text & wenn der Titel in abweichender Form im Index erscheinen soll (z.\,B. ohne führenden Artikel) \\
\Wichtig & \Feld{institution} & Liste & Name der Institution bei Hochschulschriften \\
 & \Feld{introduction} & Name & Verfasser einer Einführung \\
 & \Feld{isan} & Text & \Englisch{International Standard Audiovisual Number} \\
 & \Feld{isbn} & Text & \Englisch{International Standard Book Number} \\
 & \Feld{ismn} & Text & \Englisch{The International Standard Music Number} \\
 & \Feld{isrn} & Text & \Englisch{International Standard Technical Report Number} \\
 & \Feld{issn} & Text & \Englisch{International Standard Serial Number} \\
 & \Feld{issue} & Text & für Zeitschriften, die Bezeichner anstelle von Heftnummern benutzen (\enquote{Frühjahr} o.\,ä.) \\
 & \Feld{issuesubtitle} & Text & Untertitel eines Themenheftes einer Zeitschrift \\
 & \Feld{issuetitle} & Text & Titel eines Themenheftes einer Zeitschrift \\
 & \Feld{iswc} & Text & \Englisch{International Standard Work Code} \\
\Wichtig & \Feld{journalsubtitle} & Text & Untertitel einer Zeitschrift \\
\Wichtig & \Feld{journaltitle} & Text & Titel einer Zeitschrift \\
\Wichtig & \Feld{label} & Text & Zitatlabel, (wenn die automatisch erzeugten nicht erwünscht sind) \\
\Wichtig & \Feld{language} & Schlüsselliste & Sprache des Eintrags \\
 & \Feld{library} & Text & Angaben zum Standort des Werks \\
\Wichtig & \Feld{location} & Liste & Publikationsort \\
\Wichtig & \Feld{mainsubtitle} & Text & Hauptuntertitel eines mehrbändigen Werks \\
\Wichtig & \Feld{maintitle} & Text & Haupttitel eines mehrbändigen Werks \\
\Wichtig & \Feld{maintitleaddon} & Text & Haupttitelzusatz eines mehrbändigen Werks \\
 & \Feld{nameaddon} & Text & Zusatz zum \Feld{author} wie z. B. Aliase \\
 & \Feld{note} & Text & bibliographische Angaben, die sonst nirgendwo hinpassen \\
\Wichtig & \Feld{number} & Text & Nummer eines Zeitschriftenheftes oder einer Serie \\
 & \Feld{organization} & Liste & Institution, die ein Werk publiziert hat  \\
\Wichtig & \Feld{origdate} & Datum & Originaldatum bei Nachdrucken oder Übersetzungen \\
 & \Feld{origlanguage} & Schlüsselliste & Originalsprache bei Nachdrucken oder Übersetzungen \\
\Wichtig & \Feld{origlocation}  & Liste & originale Publikationsorte bei Nachdrucken oder Übersetzungen \\
\Wichtig & \Feld{origpublisher} & Liste & Originalverlage bei Nachdrucken oder Übersetzungen \\
 & \Feld{origtitle} & Text & Originaltitel bei Nachdrucken oder Übersetzungen \\
\Wichtig & \Feld{pages} & Zahlenbereich & Seitenzahlen bei unselbstständigen Publikationen \\
 & \Feld{pagetotal} & Text & Gesamtzahl der Seiten eines selsbtständigen Werks \\
\Wichtig & \Feld{pagination} & Lokalisation & Art der Seitenzählung (Paragraphen, Spalten etc.) \\
\Wichtig & \Feld{part} & Text & Teil bzw. Faszikel eines mehrbändigen Werkes (nicht bei Zeitschriften!)\\
\Wichtig & \Feld{publisher} & Liste & Verlag \\
\Wichtig & \Feld{pubstate} & Lokalisation & Publikationsstatus (z.\,B. \enquote{im Druck}) \\
 & \Feld{reprinttitle} & Text & Titel eines Reprints \\
\Wichtig & \Feld{series} & Text & Serientitel bei Büchern als auch Zeitschriften (z.\,B. \enquote{Neue Folge}) \\
\Wichtig & \Feld{shortauthor} & Name & Abkürzung des \Feld{author}, v.\,a. bei korporativen Autoren \\
\Wichtig & \Feld{shorteditor} & Name & Abkürzung des \Feld{editor}, v.\,a. bei korporativen Herausgebern \\
 & \Feld{shorthand} & Text & für Einträge, die mit Abkürzung zitiert werden \\
 & \Feld{shorthandintro} & Text & Einleitung der ersten Abkürzung  (z.\,B. \enquote{im Folgenden zitiert als \textellipsis}) \\
\Wichtig & \Feld{shortjournal} & Text & Abkürzung des Zeitschriftentitels \\
\Wichtig & \Feld{shortseries} & Text & Abkürzung des Serientitels \\
\Wichtig & \Feld{shorttitle} & Text & Abkürzung des Titels \\
\Wichtig & \Feld{subtitle} & Text & Untertitel \\
\Wichtig & \Feld{title} & Text & Titel \\
\Wichtig & \Feld{titleaddon} & Text & Titelzusatz \\
 & \Feld{translator} & Name & Übersetzer \\
\Wichtig & \Feld{type} & Lokalisation & Art des Dokuments bei \Typ{manual}, \Typ{patent}, \Typ{report} und \Typ{thesis} \\
\Wichtig & \Feld{url} & wörtlich & URL \\
\Wichtig & \Feld{urldate} & Datum & Zugriffsdatum eines Onlinedokuments \\
\Wichtig & \Feld{venue} & Text & Veranstaltungsort \\
\Wichtig & \Feld{version} & Text & Versionsnummer \\
\Wichtig & \Feld{volume} & Ganzzahl & Bandnummer sdowohl bei mehrbändigen Werken als auch Zeitschriften \\
 & \Feld{volumes} & Ganzzahl & Gesamtzahl der Bände eines mehrbändigen Werkes \\
\end{xltabular}
\end{Zebratabelle}

Spezielle Felder enthalten keine druckbaren Daten. Sie sind grundsätzlich in allen Dokumententypen verfügbar. 
\begin{itemize}
\item Man kann in einem Eintrag auf Daten aus anderen referenzieren. Schon die alten \BibTeX-Stile kennen das \Feld{crossref}. Mit ihm kann man die mit \Kbd{book<felder>} von Sammelwerksbeiträgen einsparen, da die entsprechenden \Kbd{<felder>} des Sammelwerks ausgelesen werden. Bei \BibTeX{} ist es dafür notwendig, daß der Beitrag in der Datenbank vor dem Sammelwerk steht; bei Verwendung von \Biber  ist das egal. \blx{} hat diese Technik ausgeweitet. Mit dem Feld \Feld{xdata} kann man auf \Typ{xdata} verweisen, in dem man wiederholende Datenkombinationen (z.\,B. \Feld{location}/\Feld{publisher}-Paare) speichern kann. Mit \Feld{related} und seinen Spezifizierern können Stilautoren beliebige Verhältnisse entwickeln.
\item Das Feld \Feld{gender} wird gebraucht, um Genus und Numerus von Pronomen, die den Labelnamen ersetzen (derselbe, dieselbe, dasselbe), zu steuern. Im Deutschen braucht man sie für nichtmännliche Singulare. Im Englischen ist die Verwendung lateinischer Pronomen nicht unüblich, die auch im Plural deklinieren. Erlaubt sind die Werte \Kbd{sf}, \Kbd{sm}, \Kbd{sn}, \Kbd{pf}, \Kbd{pm}, \Kbd{pn} oder \Kbd{pp}.
\item Mit den Feldern \Kbd{sort...} kann man alternative Sortierausdrücke angeben, die aber nicht ausgedruckt werden. Wenn ich z.\,B. \Feld{sortname} angebe, wird der Name nach diesem Feld sortiert, aber der \Feld{author} bzw. \Feld{editor} ausgedruckt wie gehabt. Damit kann man Sortierfehler beseitigen, z.\,B. wenn man Buchstaben mit diakritischen Zeichen anders sortiert sehen möchte.
\end{itemize}

\renewcommand{\Tabellenkopf}{
\rowcolor{zebraodd}
 &
\textbf{Feld} &
\textbf{\normalsize Datentyp} &
\textbf{\normalsize Erläuterungen}
\\\toprule}
\setlength{\ErsteSpalte}{8.5em}

\begin{Zebratabelle}
\begin{xltabular}{\linewidth}{p{1em}p{\ErsteSpalte}LL}
\rowcolor{zebraodd}
\caption[Spezielle Felder von \blx{} ]{Spezielle Felder von \blx{} }
\label{tab:specfields} % must be after \caption
\\
\Tabellenkopf
\endfirsthead
\rowcolor{zebraodd}
\multicolumn{4}{c}{{\tablename\ \thetable{} (Fortsetzung)}} \\
\Tabellenkopf
\endhead

\rowcolor{zebraodd}
\multicolumn{4}{r}{{\itshape Fortsetzung auf der nächsten Seite}}
\endfoot

\bottomrule
\endlastfoot

\Wichtig & \Feld{crossref} & Schlüssel & Der Verweis eines Kindeintrages auf seinen Elterneintrag \\
 & \Feld{entryset } & Schlüsselliste & Einträge eines \Typ{set} \\
 & \Feld{execute} & Text & ausführbarer \LaTeXi-code \\
\Wichtig & \Feld{gender} & Muster & Genus und Numerus von Pronomen (\Kbd{sf}, \Kbd{sm}, \Kbd{sn}, \Kbd{pf}, \Kbd{pm}, \Kbd{pn} oder \Kbd{pp}) \\
 & \Feld{langid} & Muster & eine dem \Paket{babel}- oder \Paket{polyglossia}-Paket bekannte Sprache, um die Sprache des Eintrags festzulegen \\
 & \Feld{langidopts} & CSV & Liste von \Kbd{key=value}-Ausdrücken, um \Feld{langid} näher zu bestimmen \\
 & \Feld{ids} & Schlüsselliste & Aliase für den Schlüssel des Eintrags, mit denen man genauso zitieren kann \\
 & \Feld{indexsorttitle} & Text & abweichende Sortierung des Titels im Index \\
\Wichtig & \Feld{keywords} & CSV & Schlagwörter \\
\Wichtig & \Feld{options} & CSV & Liste von \Kbd{key=value}-Ausdrücken für eintragsspezifische Optionen \\
 & \Feld{presort} & Text & Ausdruck zur Vorsortierung (damit kann man Gruppen in der Sortierung erzeugen) \\
\Wichtig & \Feld{related} & Schlüsselliste & Liste von Einträgen, die in einer näher zu bestimmenden relation zum aktuellen Eintrag stehen \\
 & \Feld{relatedoptions} & CSV & Liste von \Kbd{key=value}-Ausdrücken für Optionen, um \Feld{related} näher zu bestimmen \\
 & \Feld{relatedtype} & Lokalisation & die Art von \Feld{related} \\
 & \Feld{relatedstring} & Text & überschreibt \Feld{relatedtype} \\
 & \Feld{sortkey} & Text & überschreibt alle anderen Sortierkriterien bis auf \Feld{presort} \\
\Wichtig & \Feld{sortname} & Name & ein alternativer Name für die Sortierung \\
 & \Feld{sortshorthand} & Text & wie \Feld{sortkey}, aber für die abgekürzt zitierte Literatur \\
 & \Feld{sorttitle} & Text & ein alternativer Titel für die Sortierung \\
 & \Feld{sortyear} & Ganzzahl & ein alternatives Jahr für die Sortierung \\
\Wichtig & \Feld{xdata} & Schlüsselliste & Verweise auf \Typ{xdata}-Container \\
 & \Feld{xref} & Schlüssel & ein Verweis für einen Zähler, der die Anzahl der Aufsätze aus einem Sammelwerk zählt \\
\end{xltabular}
\end{Zebratabelle}

Die Codierung der \BibTeX-Datenbanken sollte heutzutage unbedingt in UTF-8 erfolgen. Das war lange Zeit ein Problem, denn die hinreichende Unterstützung von Unicode schleppte sich in der \TeXi-Welt lange dahin. Mittlerweile sollten damit kaum noch Schwierigkeiten entstehen. Überhaupt ist das ein universeller Ratschlag: Egal, ob \LaTeXi-Quellen, Datenbanken, Webseiten etc. pp., alles sollte in UTF-8 codiert sein, sofern man keine wirklich zwingenden Gründe hat, etwas anderes zu nehmen.

\subsection{Das Namensformat}\label{kap_names}
\BibTeX{} setzt Namen aus vier Bestandteilen zusammen: \Kbd{first}, \Kbd{last}, \Kbd{prefix} (\enquote{von part}) und \Kbd{suffix} (\enquote{Jr part}). Damit man die Namen per Copy\&Paste aus anderen Quellen übernehmen kann, kennt \BibTeX drei Formate:
\begin{lstlisting}
First von Last
von Last, First
von Last, Sr, First
\end{lstlisting}
Einige Beispiele für korrekt geparste Namen:
\begin{figure}[H]
\begin{tabular}{ll}
\NamenDemo{intro:name:1}
\NamenDemo{intro:name:2}
\NamenDemo{intro:name:3}
\NamenDemo{intro:name:14}
\NamenDemo{intro:name:15}
\NamenDemo{intro:name:4}
\NamenDemo{intro:name:5}
\NamenDemo{intro:name:6}
\end{tabular}
\end{figure}
Wenn ein Namensbestandteil aus mehreren Worten besteht, kann der Parser durcheinanderkommen. Dann muß man die Bestandteile mit Gruppenklammern zusammenfassen:
\begin{figure}[H]
\scriptsize
\begin{tabular}{ll}
\NamenDemo{intro:name:7}
\NamenDemo{intro:name:8}
\NamenDemo{intro:name:9}
\NamenDemo{intro:name:10}
\end{tabular}
\end{figure}
Korporative Autoren und solche ohne Familien bestehen nur aus dem Nachnamen:
\begin{figure}[H]
\begin{tabular}{ll}
\NamenDemo{intro:name:11}
\NamenDemo{intro:name:12}
\end{tabular}
\end{figure}
Diese Formate werden natürlich weiterhin verstanden. Das Problem war aber, daß es nur für westliche Sprachen funktioniert. Deswegen gibt es mittlerweile die Möglichkeit, die Namensbestandteile als Liste von \Kbd{key=value}-Ausdrücken zu übergeben:
\begin{figure}[H]
\citefield{intro:name:13}[userc]{userc}\\\citename{intro:name:13}[family-given]{namec}
\end{figure}
Das erlaubt jetzt auch die Definition neuer Namensbestandteile wie z. B. Patronyme bei russischen Namen oder Ordenskürzel von Klerikern. Allerdings müßte das dann auch von den jeweiligen Stilen unterstützt werden.

\subsection{Lokalisation}\label{kap_local}

\blx{} definiert eine Reihe von \Englisch{localisation keys} (auch \Kbd{bibstring}s) als Platzhalter für Ausdrücke, die in die jeweilige Landessprache übersetzt werden müssen. Beispiele dafür sind die Bezeichnungen für Hochschulschriften, die Sprache des Dokuments oder die Rollen von Beteiligten (Herausgeber, Bearbeiter, Übersetzer etc.). In das Feld \Feld{type} des Dokumententyps \Typ{thesis} z. B. trägt man den LokalisationsLokalisation für den Typ der Hochschulschrift ein.
\begin{lstlisting}
@THESIS{example-phd,
    ...
	TYPE ={phdthesis},
	...
}
\end{lstlisting}
\blx{} prüft jetzt, ob es sich bei dem Inhalt des Feldes um einen bekannten Lokalisation handelt und druckt bei Erfolg die landessprachliche Bezeichnung stattdessen aus. Das funktioniert auch mit Sprachen (\Feld{language}, \Feld{origlanguage}), Rollen (\Feld{authortype}, \Feld{editortype} etc.) und einigem anderen .

\subsection{Datum}\label{kap_datum}
\BibTeX{} kannte ursprünglich nur ein \Feld{year} (das Feld \Feld{month} ist nur für die Heftnummerierung von Zeitschriften gedacht und wird meist als Wort ausgeben). Normalerweise wurde dort das Datum als vierstellige Jahreszahl geschrieben. In der Regel haben die alten Stile aber alles wörtlich ausgegeben, was darin stand, also z. B.
\begin{lstlisting}
@MISC{example-year-bst,
    ...
	YEAR = {o.\,J. [ca.~2005]},
	...
}
\end{lstlisting}
Die ältesten Versionen von \blx{} hatten sich dieses Verfahrens auch noch bedient. Mittlerweile benutzt man aber ein Feld \Feld{date}, das Daten nach Format ISO8601-2 verarbeitet. Das bedeutet, man kann mit einem Schrägstrich Anfangs- und Enddatum eingeben, man kann sekundengenaue Werte angeben und man kann offene Zeitspannen markieren. Die folgenden Ausdrücke sind legal:
\begin{figure}[H]
\begin{tabular}{ll}
\DatumDemo{intro:date:1}
\DatumDemo{intro:date:2}
\DatumDemo{intro:date:3}
%\DatumDemo{intro:date:4}
\DatumDemo{intro:date:5}
%\DatumDemo{intro:date:6}
\DatumDemo{intro:date:7}
\DatumDemo{intro:date:8}
\DatumDemo{intro:date:9}
\DatumDemo{intro:date:10}
\DatumDemo{intro:date:11}
\end{tabular}
\end{figure}
Was die Stile davon wirklich ausgeben, ist dann noch einmal eine andere Frage. Sekundengenaue Publikationsdaten dürften kaum je Sinn ergeben. Es ist mittlerweile auch gestattet, unscharfe Daten oder solche mit negativen Jahreszahlen (also vorchristlich) einzugeben. Bei letzteren muß man daran denken, das ISO8601-2 mit einem Jahr 0 arbeitet, weil die kalendarischen Algorithmen dann unabhängig vom Vorzeichen sind. In ISO8601-2 war also -332 bei Issos Keilerei anstatt -333. Die vier Jahreszeiten kann man angeben, in dem man den Monat auf 21 (Frühjahr) bis 24 (Winter) setzt.
\begin{figure}[H]
\begin{tabular}{ll}
\DatumDemo{intro:date:12}
\DatumDemo{intro:date:13}
\DatumDemo{intro:date:14}
\DatumDemo{intro:date:15}
\DatumDemo{intro:date:16}
\DatumDemo{intro:date:17}
\DatumDemo{intro:date:18}
\DatumDemo{intro:date:19}
%\DatumDemo{intro:date:20}
\DatumDemo{intro:date:21}
\DatumDemo{intro:date:22}
\DatumDemo{intro:date:23}
\end{tabular}
\end{figure}
\section{Stile}

\section{Datenausgabe}

\subsection{Zitierkommandos}\label{kap_zitat}

Es gibt eine ganze Menge Zitierkommandos, aber keine Bange: deren Nomenklatur folgt einer Systematik, die sich gut memorieren läßt. Sehen wir uns das basale Kommando \Befehl{cite} an. Es erzeugt ein Zitat -- wie das dann aussieht, wird von den Einstellungen des jeweiligen Stils bestimmt. Sofern die bbl-Datei noch nicht existiert, ist das Kommando eine Aufforderung für \Biber, den Eintrag mit dem jweiligen Lokalisation aus der Datenbank auszulesen. Ist das schon geschehen und die bbl-Datei vorhanden, wird die Zitatmarke an dieser Stelle formatiert. Wir gehen hier mal von einem Autor-Jahr-Stil aus: \Beispiel{\cite{steinmetz:strahl:wilbers:1979}}

Wenn man mehrere Werke an derselben Stelle zitieren will, kann man eine kommaseparierte Liste von Schlüsseln übergeben: \Beispiel{\cite{steinmetz:strahl:wilbers:1979,cossel:1933-35,ib:domino:europa}}

Die Zitierkommandos haben meistens ein verpflichtendes Argument in geschweiften Klammern (den Schlüssel des Eintrages aus der \BibTeX-Datenbank) und zwei optionale in eckigen Klammern für Prä- und Postnoten, mit denen man beliebigen Text vor und nach das Zitat stellen kann. Die Postnote enthält meistens die Seitenzahl und dergleichen: \Beispiel{\cite[Vgl.][12]{steinmetz:strahl:wilbers:1979}}

Jetzt können folgende Spezialfälle auftreten:
\begin{itemize}
\item Das Zitat steht am Satzanfang, der Name beginnt aber mit einem Kleinbuchstaben. Dann kann man Großschreibung erzwingen, indem man den ersten Buchstaben des Zitierkommandos groß schreibt: \Beispiel{\Cite{cossel:1933-35}}
\item Ich will in einem Zitat mehrerer Werke Text vor und nach einzelne Werke stellen. Dafür hängt man ein Plural-s an das Zitat und wiederholt die Triole aus Prä- und Postnoten und Lokalisation solange, bis man fertig ist: \Beispiel{\cites(Wichtig!)(etc. pp.)[Vgl.][]{steinmetz:strahl:wilbers:1979}[22]{cossel:1933-35}[unbeachtlich hingegen ist][]{ib:domino:europa}}
\item Ich möchte gerne Klammern um das Zitat haben. Dafür stelle ich dem Zitierbefehl ein \texttt{paren} voran, bei längeren Kommandonamen meist nur ein \texttt{p}: \Beispiel{\parencite{steinmetz:strahl:wilbers:1979}}
\item Das Zitat soll eine Fußnote sein. Dafür stelle ich dem Zitierbefehl ein \texttt{foot} voran, bei längeren Kommandonamen meist nur ein \texttt{f}: \Beispiel{\footcite{steinmetz:strahl:wilbers:1979}}
\item Der Name soll Bestandteil des Satzes sein, aber nicht weitere Bestandteile der Zitiermarke. Dafür stelle ich dem Zitierbefehl ein \texttt{text} voran: \Beispiel{\textcite{steinmetz:strahl:wilbers:1979} behaupten \textellipsis}
\item Wenn das Zitat komplett ausgedruckt werden soll, stellt man dem Zitierbefehl ein \texttt{full} voran: \Beispiel{\fullcite{steinmetz:strahl:wilbers:1979}}
\Befehl{smartcite} verhält sich innerhalb von Fußnoten wie \Befehl{parencite} und ansonsten wie \Befehl{footcite}: \Beispiel{\smartcite{steinmetz:strahl:wilbers:1979}\textellipsis\footnote{\smartcite{steinmetz:strahl:wilbers:1979}}}
\item Wenn man noch nicht weiß, ob, inline, verbose oder numerisch zitiert werden soll, kann man den Befehl \Befehl{autocite} verwenden. Der wird dann, je nach dem, als \Befehl{parencite} oder \Befehl{footcite} übersetzt. Wenn als Fußnote eingestellt, guckt er außerdem, ob hinter sich ein Interpunktionszeichen folgt. Dann setzt er nämlich die Fußnote hinter dieses Zeichen -- probiert es mit dem Minimalbeispiel oben aus! Das funktioniert auch, wenn nicht-verbose-Stile ihre Label mit der Option \Option{notetype} in Fußnoten setzen. So praktisch das ist, unterliegt es doch engen Einschränkungen. In Autor/Jahr-Stilen kommt es häufig zu Verschränkungen des Labels mit dem Text. In Fußnoten hingegen gibt es mitunter ziemlich lange Prä- und Postnoten. Auf beides muß man weitgehend verzichten. Im Prinzip ergibt \Befehl{autocite} nur als zusatzloses Zitat am Satzende vor dem Interpunktionszeichen Sinn. Man beachte, daß es durchaus verschiedene Sichtweisen darauf gibt, wo die Fußnotenmarke stehen soll (\cref{kap_autopunct}).
\end{itemize}

Wenn man jetzt alle möglichen Kombinationen aus diesen Regeln erstellt, erhält man den wesentlichen Satz der Zitierkommandos von \blx{} :
\begin{lstlisting}
        \cite      \Cite      \cites      \Cites
paren:  \parencite \Parencite \parencites \Parencites
foot:   \footcite             \footcites
text:   \textcite  \Textcite  \textcites  \Textcites
full:   \fullcite  \Fullcite  \fullcites  \Fullcites
smart:  \smartcite \Smartcite \smartcites \Smartcites
auto:   \autocite  \Autocite  \autocites  \Autocites
\end{lstlisting}
Für Fußnoten werden keine Großschreibungsvarianten gebraucht, weil sie als absatzartiges Element immer einen Satzanfang darstellen.

Jetzt gibt es diese Zitate auch allesamt für mehrbändige Werke, wo immer auch die Bandnummer genannt werden muß. Deshalb haben die Kommandos der \Befehl{volcite}-Familie zwei verpflichtende Argumente. Das führt bei den Multizitaten zu dem Problem, daß alle Werke in der Liste eine Bandnummer haben müssen (also für alle Dokumententypen mit mv\textellipsis). Ich würde daher raten, soweit als möglich die Einzelbände als Einzelwerke zu zitieren. Das geht, wenn sie eine bandübergreifende Seitennummerierung haben oder sich noch in anderen Merkmalen als der Bandnummer unterscheiden (Autor, Titel, Jahr etc).  
\Beispiel{\volcite[Vgl.]{1}[12]{steinmetz:strahl:wilbers:1979}}

\begin{lstlisting}
        \volcite  \Volcite  \volcites  \Volcites
paren:  \pvolcite \Pvolcite \pvolcites \Pvolcites
foot:   \fvolcite           \fvolcites
text:   \tvolcite \Tvolcite \tvolcite  \Tvolcite
full:   ---
smart:  \svolcite \Svolcite \svolcites \Svolcites
auto:   \avolcite \Avolcite \avolcites \Avolcites
\end{lstlisting}
\Befehl{fullcite}-Varianten wären hier sinnlos.
\par
Es gibt weitere, die eher speziellen Zwecken dienen.
\begin{itemize}
\item \Befehl{supercite} stellt die Zitatmarke hoch. Er existiert nur in numerischen Stilen. Da dort kein Text in die Marke gedruckt wird, sind die Varianten für Großschreibung und Multizitate verzichtbar.
\item \Befehl{cite*}, \Befehl{parencite*}, \Befehl{autocite*} gibt es nur in Autor/Jahr und Autor/Titel-Stilen. Sie drucken nur das Jahr bzw. den Titel, weswegen hier ebenfalls weder Großschreibung noch Multizitatvarianten gebraucht werden.
\item \Befehl{nocite} dient dazu, Werke ohne Zitat in das Literaturverzeichnis aufzunehmen. \Befehl{nocite}\Kbd{\detokenize{{*}}} druckt alle Einträge aus.
\item \Befehl{notecite} druckt die Prä- und Postnote ohne Zitat. Das Werk erscheint aber im Literaturverzeichnis.
\item \Befehl{footcitetext} ist wie \Befehl{footcite}, setzt aber den Fußnotenzähler nicht hoch. Es ist für Fälle gedacht, wo der Fußnotentext an ungewöhnlichen Stellen erscheinen soll, z. B. unter Tabellen oder in Bildbeschriftungen. Solche Fußnoten benutzen normalerweise einen lokalen Zähler.
\item \Befehl{footfullcite}: wie \Befehl{fullcite}, aber immer als Fußnote.
\item Es gibt eine Reihe Kommandos für einzelne Felder (Autor, Datum, Titel, URL). Aber Vorsicht: als Zitierkommandos erzeugen sie Einträge im Literaturverzeichnis!
\item Es gibt Zitierkommandos für beliebige Felder der verschiedenen Datentypen (\Befehl{citefield}, \Befehl{citelist}, \Befehl{citename}). Die haben zusätzliche Argumente, mit denen sich von den Stilvorgaben abweichende Formatierungen übergeben lassen (nicht in Übersicht).
\item Per Paketoption lassen sich die Zitierkommandos der wichtigen \BibTeX-Stile \Paket{natbib} und \Paket{mcite} aus Kompatibilitätsgründen einschalten (nicht in Übersicht).
\end{itemize}

\begin{lstlisting}
\supercite                   \supercites
\notecite       \Notecite
\fnotecite
\pnotecite      \Pnotecite
\footfullcite
\footcitetext                \footcitetexts
\ftvolcite
\cite*
\parencite*
\autocite*     \Autocite*
\citeauthor    \Citeauthor
\citeauthor*   \Citeauthor*
\citetitle
\citetitle*
\citedate
\citedate*
\citeyear
\citeyear*
\citeurl
\end{lstlisting}

\subsection{Bibliographien}\label{kap_biblio}
Literaturverzeichnisse werden mit dem Kommando \Befehl{printbibliography} erzeugt. Es ist möglich, mit der Umgebung \Kbd{refsection} oder \Kbd{refsegment} Bereiche für separate Bibliographien zu erzeugen, mit denen man dann z. B. kapitelweise Literaturverzeichnisse anlegen lassen. Der Unterschied zwischen beiden Umgebungen liegt darin, daß bei \Kbd{refsection} die Eindeutigkeit der Label nur für den Bereich, bei \Kbd{refsegment} aber für das gesamte Dokument garantiert wird.

\begin{lstlisting}
\begin{refsection}
...
\end{refsection}

\begin{refsection}
...
\end{refsection}
\printbibliography[section=1,heading=subbibliography]
\printbibliography[section=2,heading=subbibliography]

\end{lstlisting}
oder
\begin{lstlisting}
\begin{refsegment}
...
\printbibliography[segment=1,heading=subbibliography]
\end{refsegment}

\begin{refsegment}
...
\printbibliography[segment=2,heading=subbibliography]
\end{refsegment}

\end{lstlisting}

Die Sektionen und Segmente werden einfach durchgezählt und mit der eponymen Option dem Befehl \Befehl{printbibliography} zugeordnet. Bei Segmenten innerhalb von Sektionen beginnt die Zählung jedesmal von neuem. Die globale Bibliographie hat die Sektion 0. Es gibt sie auch als normale Kommandos (\Befehl{beginsection} \Befehl{endsection} \Befehl{beginsegment} \Befehl{endsegment}) für den Fall, daß es Probleme mit der Verschachtelung von Umgebungen gibt -- allerdings sind Umgebungen für die Fehlersuche besser.

Es geht sogar noch ein bißchen einfacher. Da solche Abschnittsbibliographien meistens mit Gliederungsgrenzen (z.\,B. Kapiteln) konkordant sind, kann man einfach Optionen namens \Option{refsection} bzw. \Option{refsegment} einen der Werte aus der folgenden Liste übergeben: \Kbd{none}, \Kbd{part}, \Kbd{chapter}, \Kbd{chapter+}, \Kbd{section}, \Kbd{section+}, \Kbd{subsection}, \Kbd{subsection+}. Dann wird die Abschnittsbibliographie für die jeweilige Gliederungsebene errichtet; bei den Werten mit Pluszeichen auch für die übergeordneten.

In gleicher Weise als Umgebung wie als Kommando gibt es noch den \Kbd{refcontext}. Damit kann man Bereiche mit unterschiedlichen Sortierungen abzgrenzen. Obacht! Tiebreaker wie \enquote{2020a} können dann für denselben Eintrag unterschiedlich sein. Eine kleine Anwendung von Sektionen und Kontexten findet man in meinem Blogpost über Sortierung \autocite{braun_i_2020_sorting}.

Ein anderer häufiger Anwendungsfall sind thematisch geordnete Literaturverzeichnisse; in historischen Zusammenhängen typischerweise nach Quellen und Sekundärliteratur. Eine Möglichkeit wäre, die Quellen mit einem entsprechenden Schlagwort zu versehen und dann die Bibliographien nach diesem Schlagwort zu filtern. Das folgende Beispiel erstellt auch noch ein Softwareverzeichnis.
\begin{lstlisting}
\printbibliography[type=software,title=Softwareverzeichnis]
\printbibliography[keyword=source,title={Verzeichnis der Primärquellen}]
\printbibliography[notkeyword=source,nottype=software,heading=bibliography]
\end{lstlisting}
Die Filteroptionen \Option{type} und \Option{subtype} dürfen nur einmal, \Option{keyword}, \Option{category} und sämtliche Verneinungen auch mehrmals verwendet werden. Grund dafür ist, daß es sich um \enquote{und}-Verknüpfungen handelt. Mit Kategorien wurden in diesem Dokument das Verzeichnis der Beispiele von dem der Sekundärliteratur getrennt, weil sie räumlich durchmischt sind. Dafür deklariert man sie mit \Befehl{DeclareBibliographyCategory} und fügt ihr mit \Befehl{addtocategory} Einträge zu.

Es gibt eine ganze Reihe weitere Optionen für das Feintuning der Literaturverzeichnisse, die wir hier nicht alle besprechen können. Daneben gibt es noch den Befehl \Befehl{printshorthands} für alle Einträge, die ein Feld \Feld{shorthand} haben. Grundsätzlich kann man sich auch eigene Verzeichnistypen bauen.

\section{Anpassung}

Dazu gäbe es viel zu sagen, aber ich will es nur kurz anreißen. Wie oben beschrieben ist der wichtigste Vorteil von \blx{} gegenüber \Datei{*.bst}-Stilen, daß man vieles durch Änderung von LaTeX-Makros anpassen kann. Aber sobald man mehr tun will, als ein paar grundlegende Formatierungen zu ändern, wird man sich im Quellcode umsehen müssen. 
Feldformatierungen kann man so anpassen:
\begin{lstlisting}
\DeclareFieldFormat*{title}{\textbf{#1}}   		      % Alle Titel fett
\DeclareFieldFormat[book,booklet]{title}{\textit{#1}} % Nur Titel von @book & @booklet kursiv
\end{lstlisting}
In der Regel gibt es für jedes Feld ein gleichnamiges Format (außer bei Datumsfeldern, die in ihre Bestandteile aufgespalten werden), aber es gibt noch wesentlich mehr Formate. Evtl. stehen aber auch komplexere Ausdrücke wie wenn\textellipsis dann-Beziehungen in den Formaten. Die würde man dann auch überschreiben. \Befehl{DeclareListFormat} und \Befehl{DeclareListFormat} müssen auch Zähler und ggf. Namnesbestandteile abfragen.

Meist schreibt man komplexere Formate aber in \Kbd{bibmacros}, die analog zur \Befehl{newcommand}-Familie funktionieren, aber zusätzliche Zeichen im Namen erlauben: \Befehl{newbibmacro}, \Befehl{renewbibmacro} und die gesternten Varianten. Man kann solche \Kbd{bibmacros} auch zwischenspeichern und dann wiederherstellen. In der Regel wird es für semantische Gruppen wie Ort/Verlag/Jahr Formate geben.

Formatanweisungen unterhalb der Felderebene wie Namensbestandteile und Trennzeichen von Listen liegen einfach als Befehle vor, die sich wie gehabt mit \Befehl{renewcommand*} ändern lassen. Trennzeichen lassen sich auch kontextsensitiv nur für bestimmte Bereiche ändern.
\begin{lstlisting}
\renewcommand*{\mkbibnamefamily}[1]{\textbf{#1}} % Nachname fett (auch -given, -prefix, -suffix)
\DeclareDelimFormat*[bib]{multilistdelim}{\textbar\addthinspace} % Listentrenner nur in der Bibliographie
\renewcommand*{\finalnamedelim}{\addspace\bibstring{and}\space} % letzter Namenstrenner global
\end{lstlisting}
Bei Klammern sollte man unbedingt auf die \blx-Befehle zurückgreifen, weil dort deren Balance überwacht wird. Auch bei Interpunktion und Leerzeichen sollte man auf die \blx-Kommandos des Types \Befehl{addperiod}, \Befehl{addspace} etc. zurückgreifen. Interpunktion hängt nämlich auch davon ab, was folgt. \blx{} schreibt sie deswegen in einen Puffer, der erst ausgedruckt wird, wenn man weiß, was als nächstes kommt.
Es gibt Hooks wie z.\,B. \Befehl{AtBeginBibliography} oder \Befehl{AtEveryCite}, mit denen man Code an bestimmten Einsprungstellen des Verarbeitungsprozesses placieren kann. Einfache Filter, um z.\,B. den Inhalt eines Feldes in ein anderes zu kopieren, kann man auf der \LaTeXi-Ebene mit \Befehl{AddInputHandler} durchführen. Mit als \Befehl{DeclareSourcemap} kann man Filter bauen, die beim Einlesen der Datenbank (also vor dem Parsen des \LaTeXi-Codes!) in \Biber auch Jokersuchen und Ersetzen mit regulären Ausdrücken durchführen können. Und schließlich kann man mit dem Paket \Paket{xpatch} Code an Makros anheften oder sogar ersetzen. 

\chapter{\archbib}\label{kap_blxarch}

\section{Einleitung}

Das hier beabsichtigt keine Befehlsreferenz. Für die Implementation mußten auch eine ganze Reihe Makros für Abstände, Interpunktion und Tests geschrieben werden, mit denen Endnutzer vermutlich wenig in Kontakt kommen. Ich gehe hier nach Aufgaben vor, um einen Überblick, was \archbib{} alles kann bzw. gegenüber \blx{} verändert. Für eine vollständige Referenz ist weiterhin das Manual zu benutzen. Auch die Beispieldatenbanken sollten aufmerksam betrachtet werden.

\subsection{Rationale}

\archbib{} wurde erstellt, in dem zahlreiche Zitiervorschriften deutscher, zumeist archäologischer Publikationsorgane verglichen wurden, um die Anforderungen an ein universale Software für diesen Interessentenkreis zu ermitteln. Keine einzige der betreffenden Zeitschriften akzeptiert derzeit \LaTeXi-Quellen. Paradoxerweise ist das nachgerade die Voraussetzung für die Arbeit an \archbib, da nur so der Eindruck vermieden wird, hierbei handle es sich um offizielle Regeln der Redaktionen. Grundsätzlich sind alle ausführlichen Zitiervorschriften erheblich unvollständig, meist widersprüchlich und merklich ohne Gedanken an automatisiertes Zitieren verfaßt worden.

Ausgangspunkt waren natürlich die ausführlichen Zitier- und Bibliographiervorschriften der Römisch-Germanischen Kommission (RGK) \autocite{rgk::}, die für die deutschsprachige (Ur- und Frühgeschichte\textbar Vor- und Frühgeschichte\textbar Prähistorische Archäologie) autoritativ sind. Viele Richtlinien aus diesem Bereich nehmen nur unwesentliche Änderungen vor und verweisen für den Rest auf die RGK. Eher zufällig habe ich entdeckt, daß die deutschsprachige Ägyptologie auch häufig RGK-artige Regeln benutzt, was bei einem so stark philologisch geprägten Fach nicht selbstverständlich ist. Möglicherweise waren für beide die Klassischen Archäologen des Deutschen Archäologischen Instituts (DAI) Vorlagengeber, aber das hat zunächst nur den Status einer informierten Spekulation.

Auch in der Kulturanthropologie/Ethnologie, vorwiegend der außereuropäischen (ehedem \enquote{Völkerkunde}), kommt man mit dem RGK-Schema einigermaßen weit. Trotzdem ist \Stil{zaak} einer von zweien, die technisch betrachtet eigentlich nicht in das Paket gehören. Die Unterstützung für die ungewöhnliche tabulierte Anordnung des Labeldatums sollte es aber auch in diesen Fächern ermöglichen, \archbib{} zu verwenden, sofern sich niemand findet, der ein spezielles Paket dafür schreibt. Der andere Fremdling ist \Stil{dguf-apa}, der deutsche Typographie mit dem verbreiteten angelsächsischen Stil der American Psychological Association (APA) versöhnen will. Beide aufzunehmen ist eine durchaus fragwürdige Entscheidung, weil sie unverhältnismäßig viel Programmieraufwand verursacht haben und den Code des Gesamtpakets zum Nachteil seiner Wartbarkeit aufblähen.

\subsection{Charakteristik des RGK-Stils und typographische Hinweise}

\begin{enumerate}
\item Der größte Unterschied zu den Standardstilen von \blx{} ist, daß bei Aufsätzen Sammelwerksautoren vor dem Sammelwerkstitel stehen anstatt dahinter.\footnote{Moritz Wemheuer hat mittlerweile einen Stil \Stil{biblatex-ext} als Schablone für solche Stile erstellt. Den gab es noch nicht, als \archbib{} begonnen wurde.}
\item Die Stile sind sehr sparsam mit Textauszeichnungen wie Fett- und Kursivdruck und Anführungszeichen. Lediglich die Auszeichnung von Labelnamen mit Kapitälchen ist verbreitet.
\item Auch auf Zusätze wie Band, Jahrgang, Nummer, Heft, Seite(n) wird in der Regel verzichtet.
\item Es werden keine Informationen zu Sprachen und Übersetzern angegeben.
\item Verlagsangaben werden meist vermieden. Bei den Verlagsorten ist das unterschiedlich; mitunter kommen sie sogar bei Zeitschriften vor.
\item Ziemlich bemerkenswert ist die große Zurückhaltung bei den digitalen Identifikatoren (ISBN/ISSN, DOI, URN, URL etc.).
\item Großer Wert wird hingegen auf die Nennung von Veranstaltungstypen gelegt.
\item Von monographischen Serientiteln werden auch Unterreihen ausgebeben, und zwar als eigener Block und nicht nur als Titelergänzung.
\end{enumerate}

Wenn man Kapitälchen verwendet, sollte man unbedingt Schriftarten wählen, die über echte Kapitälchen verfügen. Falsche Kapitälchen kann man erzeugen, indem man Großbuchstaben einfach in die Nähe der x-Höhe skaliert. Computerschriften bestehen zwar aus Vektorgrafiken, man bekommt beim Skalieren aber schnell Probleme mit der Strichstärke, die sich dann hier auch noch von den Majuskeln unterscheidet. Zudem profitieren Kapitälchen von einer geringen Sperrung. Wie man die mit dem Paket \Paket{microtype} erzeugt, steht im Quelltext dieses Dokuments. Das ist aber eine schriftartspezifische Einstellung, die Sichtkontrolle verlangt.

Die Zurückhaltung bei den Identifikatoren sollte man überdenken. Wissenschaftliche Publikationen werden heutzutage vermutlich bevorzugt am Bildschirm gelesen. Und aus den Identifikatoren lassen sich meistens unschwer (z.\,T. vollautomatisisert) klickbare Links erzeugen. In diesem Dokument werden Optional Content Groups (OCG) verwendet, um am Bildschirm bunte Farben für klickbare Schriftzüge zu haben, auf dem Drucker aber normale Textfarbe auszugeben. Es hängt vom PDF-Viewer ab, ob er OCG beherrscht. Gegen dieses Vorgehen spricht wahrscheinlich die Langzeitarchivierbarkeit, weil der PDF/A-Standard Aufrufe externer Systeme verbietet.\footnote{Dieser Text ist also nicht PDF/A-konform, obwohl ihn der Validator \url{https://www.pdfen.com/pdf-a-validator} dafür hält.} Aber Identifikatoren ließen sich ja auch dann erkennen (Rohtextausgabe, Zwischenablage, OCR), so wie es ja auch das Browserplugin für \Paket{Zotero} tut.

Daß das Paket nicht \blx\textsf{-rgk} heißt, hat zwei Gründe. Zum einen erschien es mir problematisch, einen Eigennamen ohne Erlaubnis zu verwenden. Zum anderen nahm ich an, daß wer nach \blx{} und RGK sucht, mangels Alternativen sowieso auf \archbib{} trifft. \Englisch{Archaeology} ist unter SEO-Gesichtspunkten einfach die bessere Wahl.
 
\subsection{Alternativen}

Es gibt den Stil \Stil{archaeologie} für die Richtlinien des DAI.

Vom selben Autor gibt es auch einen Stil für das {International Journal of Student Research in Archaeology} IJSRA.

\section{Änderungen und Erweiterungen zu \blx}

\subsection{Stile}

Die prähistorische Archäologie ist wissenschaftsgeschichtlich sowohl aus philologischen (klassische Philologie, Geschichtswissenschaft, Germanistik) als auch aus naturwissenschaftlichen Disziplinen (v.\,a.~Geologie) hervorgegangen und rühmt sich gerne, eine Schnittstelle der Interdisziplinarität zu sein. Das drückt sich in den RGK-Anweisungen darin aus, daß man Zitieren sowohl im \Englisch{verbose}- als auch im Autor/Jahr-Modus zuläßt. \archbib{} deckt beides ab. Auf eine Nutzeranfrage hin habe ich auch numerische Varianten hinzugefügt. Die kommen zwar in der Fachliteratur nicht vor, werden aber offenbar in internen Papieren wie z.\,B. Forschungsanträgen genutzt. Auch in der generischen Webpublikation (also auf HTML-Seiten) sind sie beliebt. Ein Vorteil ist auf jeden Fall, daß sie bei sehr kleinen Bildschirmen (Smartphones) nicht so viel von der ohnehin geringen Zeilenlänge wegnehmen.

Es gibt sechs generische Stile, die man daran erkennt, daß ihre Namen auf \Kbd{-archaeology} enden. Sie sind dafür da, den Code der korrespondierenden \blx-Stile erben. Für Endnutzer sind sie nicht optimiert. Allerdings wird man neue Stile auf sie aufsetzen.

Die Auswahl der Stile ist arbiträr. Da ich wissen wollte, was \archbib{} alles können muß, habe ich mir alle leicht auffindbaren Richtlinien angesehen und dann implementiert, weil man in einem fortgeschrittenen Entwicklungsstadium den grundlegenden Code nur noch mit großer Mühe aufbohren kann. So kommt es, daß auch veraltete und sehr abseitige Stile dabei sind:

\begin{enumerate}
\item\Stil{aefkw}\hspace{0.8em}Ägyptologische Forschungsstätte für Kulturwissenschaft
\item\Stil{afwl}\hspace{0.8em}Ausgrabungen und Forschungen in Westfalen-Lippe
\item\Stil{amit}\hspace{0.8em}Eurasien-Abteilung des Deutschen Archäologischen Instituts (Archäologische Mitteilungen aus Iran und Turan)
\item\Stil{archa}\hspace{0.8em}Archaeologia Austriaca (obsolet)
\item\Stil{bmoe}\hspace{0.8em}
\item\Stil{dguf}\hspace{0.8em}Deutsche Gesellschaft für Ur- und Frühgeschichte (obsolet)
\item\Stil{dguf-alt}\hspace{0.8em}Deutsche Gesellschaft für Ur- und Frühgeschichte (obsolet)
\item\Stil{dguf-apa}\hspace{0.8em}Deutsche Gesellschaft für Ur- und Frühgeschichte
\item\Stil{eaz}\hspace{0.8em}Ethnographisch-Archäologische Zeitschrift
\item\Stil{eaz-alt}\hspace{0.8em}Ethnographisch-Archäologische Zeitschrift (obsolet)
\item\Stil{egypthd }\hspace{0.8em}
\item\Stil{foe}\hspace{0.8em}Fundberichte aus Österreich
\item\Stil{jb-halle}\hspace{0.8em}Landesamt für Denkmalpﬂege und Archäologie Sachsen-Anhalt
\item\Stil{jb-kreis-neuss}\hspace{0.8em}Kreisheimatbund Neuss e. V.
\item\Stil{karl}\hspace{0.8em}Karl. Das kulturelle Schachmagazin
\item\Stil{kunde}\hspace{0.8em}Die Kunde
\item\Stil{maja}\hspace{0.8em}Münchner Arbeitskreis Junge Aegyptologie
\item\Stil{mpk}\hspace{0.8em}Mitteilungen der Prähistorischen Kommission der Österreichischen Akademie der Wissenschaften (obsolet)
\item\Stil{mpkoeaw}\hspace{0.8em}Mitteilungen der Prähistorischen Kommission der Österreichischen Akademie der Wissenschaften
\item\Stil{niedersachsen}\hspace{0.8em}Archäologische Kommission für Niedersachsen e. V.
\item\Stil{nnu}\hspace{0.8em}Niedersächsisches Landesamt für Denkmalpﬂege
\item\Stil{offa}\hspace{0.8em}Institut für Ur- und Frühgeschichte der Christian-Albrechts-Universität zu Kiel
\item\Stil{rgk-inline}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (Autor/Jahr)
\item\Stil{rgk-inline-old}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (Autor/Jahr), vor 2018
\item\Stil{rgk-numeric}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (numeric)
\item\Stil{rgk-numeric-old}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (numerisch), vor 2018
\item\Stil{rgk-verbose}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (verbose)
\item\Stil{rgk-verbose-old}\hspace{0.8em}Römisch-Germanische Kommission des Deutschen Archäologischen Instituts (verbose), vor 2018
\item\Stil{rgzm-inline}\hspace{0.8em}Römisch-Germanisches Zentralmuseum (Autor/Jahr)
\item\Stil{rgzm-numeric}\hspace{0.8em}Römisch-Germanisches Zentralmuseum (numerisch)
\item\Stil{rgzm-verbose}\hspace{0.8em}Römisch-Germanisches Zentralmuseum (verbose)
\item\Stil{ufg-muenster-inline}\hspace{0.8em}Westfälische Wilhelms-Universität Münster, Historisches Seminar, Abteilung für Ur- und Frühgeschichtliche Archäologie (Autor/Jahr)
\item\Stil{ufg-muenster-numeric}\hspace{0.8em}Westfälische Wilhelms-Universität Münster, Historisches Seminar, Abteilung für Ur- und Frühgeschichtliche Archäologie (numerisch)
\item\Stil{ufg-muenster-verbose}\hspace{0.8em}Westfälische Wilhelms-Universität Münster, Historisches Seminar, Abteilung für Ur- und Frühgeschichtliche Archäologie (verbose)
\item\Stil{volkskunde}\hspace{0.8em}Zeitschrift für Volkskunde
\item\Stil{zaak}\hspace{0.8em}Kommission für Archäologie außereuropäischer Kulturen des Deutschen Archäologischen Instituts
\item\Stil{zaes}\hspace{0.8em}Zeitschrift für Ägyptische Sprache und Altertumskunde
\end{enumerate}

Für alle Stile gibt es Ausdrucke meiner Testdatei im Ordner mit der Dokumentation.


\subsection{Konfiguration von \Biber}
Da \archbib{} viele als \Biber-only ausgewiesene Features von \blx{} benutzt, habe ich entschieden, bei Verwendung von \BibTeX{} eine Fehlermeldung auszuwerfen. Eine andere Lösung als \enquote{Benutzt \Biber!} hätte ich bei Anfragen sowieso nicht anzubieten.

Wer \Biber im Toolmodus benutzen will, findet das Datenmodell und die Vererbung in der Datei \Datei{bibertool.xm_} und kann sie in seine eigene Konfigurationsdatei einsetzen wie in \cref{kap_biber} beschrieben.

\subsection{Sortierung}

\subsection{Dokumententypen}
\paragraph{\Typ{inreference}}
\Typ{inreference} für Einträge in Lexika, Wörterbüchern und Enzyklopädien ist in \blx{} nur ein Alias für \Typ{incollection}. In \archbib{}hat dieser Datentyp eine eigenständige Bedeutung, weil man im Titel einen Ausdruck wie \enquote{s.\,v.} (\Latein{sub voce}) voranstellen kann.
\paragraph{\Typ{review}}
\Typ{review} ist in \blx{} nur ein Alias für \Typ{article}. In \archbib{}hat dieser Typ eine Besonderheit. Man kann im Feld \Feld{related} eine Liste von Schlüsseln der besprochenen Werke angeben. Dann erzeugt \archbib{} daraus den Titel. Besprechungen in wissenschaftlichen Zeitschriften haben normalerweise keinen eigenständigen Titel, in Publikumszeitschriften schon. Dann sollte man wohl besser den realen Titel nehmen. Es gibt auch mehrere Lokalisierungsschlüssel dazu (\Lokalisierung{by}, \Lokalisierung{reviewof}, \Lokalisierung{reviewsof}).
\paragraph{\Kbd{digital}}
\Kbd{digital} ist ein Subtyp, den man bei jedem anderen Typ im \Feld{entrysubtype} angeben kann. Sinn ist es, das Abschalten von elektronischen identifiern mit den Optionen \Option{doi}, \Option{url} und \Option{eprint} zu unterbinden. Da im Grunde mittlerweile jeder Dokumententyp online erscheinen kann, kann man damit Fälle markieren, in dem \Typ{online} nicht geeignet ist, aber auch nicht ohne elektronische ID zitiert werden kann.
\paragraph{\Kbd{news}}
Der Subtyp \Kbd{news} geht in das Feld \Feld{entrysubtype}. Er ist nur bei Zeitungsartikeln sinnvoll (\Typ{article}, \Typ{review}, \Typ{suppperiodical}). Er markiert Zeitschriften, die nicht mit wie üblich mit Band, Heft und Jahrgang zitiert werden können, sondern ein volles Datum brauchen. Das ist meistens bei Tages- und Wochenzeitschriften der Fall. Selbstredend ergibt das nur Sinn, wenn man im \Feld{date}-Feld ein tagesgenaues Datum angibt. Dazu gibt es einen Lokalisierungsschlüssel \Lokalisierung{articledated} \enquote{Artikel vom}.

\subsection{Zitierkommandos}

\archbib{} stellt folgende zusätzliche Zitierkommandos bereit, deren Bedeutung unten erklärt wird.

\paragraph{\Englisch{shortformes}}
Einige besonders häufige Enzyklopädien und Corpora werden abgekürzt zitiert, allerdings auf eine Weise, die sich von den dafür vorhandenen Mechanismen von \blx{} unterscheidet

\paragraph{Possessivformen}
In den meisten germanischen Sprachen ist die Bildung des Genitivs mit angehängtem s verbreitet. Das Problem bei der Benutzung von \Befehl{textcite} ist, daß man bei \enquote{Müller (2020)} nicht an die Innenseite des Namens herankommt, um so etwas wie \enquote{Müllers (2020) Hauptwerk \textellipsis} zu schreiben. Das ermöglichen die Kommandos der \Befehl{posscite}-Familie. Die Frage ist, ob man bei mehreren Autoren alle oder nur den letzten Namen in den Genitiv setzen soll? \archbib tut letzteres, weil es sich nach meinem Sprachgefühl um eine feste Verbindung ähnlich einem Kompositum handelt.

\paragraph{Zitieren in Besprechungen}
Die Kommandos der \Befehl{reviewcite}-Familie sind für das Zitieren in Besprechungen gedacht. Dort verlangen die RGK-Regeln etwas abgespeckte \Befehl{fullcite}-Varianten (v.\,a. keine Reihen). In solchen Texten sollten ausschließlich Zitierkommandos dieser Familie vorkommen.

\paragraph{Zeitschriftenhefte}
Die Befehle der \Befehl{citeissue}-Familie dienen dazu, ganze Zeitschriftenhefte zu zitieren und drucken nur den Jahrgang/Heft/Jahreszahl-Block. Sie sind deshalb nur sinnvoll, wenn die Schlüssel vom Typ \Typ{periodical} stammen. Im Text muß also klar sein, um welche Zeitschrift es geht.

\subsection{Titelergänzungen (v.\,a. Publikationen aus Veranstaltungen)}\label{kap_events}
Archäologische Literaturverzeichnisse legen häufig großen Wert auf die Auszeichnung von Publikationen, die aus Veranstaltungen (Konferenzen, Ausstellungen, Festschriften) hervorgegangen sind. Das ist ein Relikt der Zettelkataloge. Meistens konnte man sich die Veranstaltung besser merken als die genauen Titel oder gar die möglicherweise nicht sehr bekannten Herausgeber. Deshalb hat man einfacher unter dem Veranstaltungstyp bzw. unter dem Namen der geehrten Person nachgesehen. Solche Publikationen haben i.\,d.\,R. eine Art Untertitel, in der Anlaß, Zeit und Ort der Veranstaltung beschrieben wird. \Wichtig{} Diese Angabe gehören in die \Feld{titleaddon}-Felder und \emph{nicht} in die \Feld{subtitle}-Felder. Da diese Zeilen häufig relativ lang sind, wird gerne eine Kurzformel stattdessen benutzt. Nur bei den Feldern der \Feld{titleaddon}-Familie kann ich mir sicher sein, daß ich sie weglassen darf. \blx' \Feld{eventtitle}-Feld hingegen ist hier nicht nutzbar, weil die Semantik von \Feld{maintitleaddon} und \Feld{booktitleaddon} bedeutsam ist.

Die Kurzformeln habe ich freihändig als \Englisch{titlenotes} bezeichnet. Leider ist die Form sehr fusselig, weswegen ich ziemlich viele Felder definieren mußte, um sie komplett abzubilden. I.\,d.\,R. stehen aber sämtliche relevanten Angaben in den \Feld{titleaddon}-Feldern, so daß diese bei der Datenerfassung erst einmal ausreichen. Erst wenn man einen Eintrag tatsächlich mit Kurzform ausdruckt, muß man die entsprechenden Angaben nachtragen.

Zwei boolsche Optionen steuern das Verhalten der Veranstaltungstypen:
\begin{itemize}
\item Ist \Option{titlenote} wahr, wird die Kurzform benutzt, sonst der wörtliche Inhalt von \Feld{titleaddon}.
\item \Option{titlebrackets} bestimmt die Position. Wenn wahr, wird die Veranstaltung als (i.\,d.\,R. geklammerter) Zusatz in den \Feld{title}-Block gesetzt. Wenn falsch, wird die Veranstaltung vom \Feld{title}-Block durch eine Blocktrennung abgegrenzt.
\end{itemize}
Diese Optionen kann man als Paketoptionen setzen, aber auch im \Feld{options}-Feld. Das ist nötig, weil manche Stile nur Ausstellungen als \Englisch{titlenotes} behandeln. In diesem Fall sieht \Biber in den \Feld{titleaddon}-Feldern nach, ob es dort den Begriff Ausstellung in einigen westeuropäischen Sprachen erkennt. Im Erfolgsfall setzt es die Optionen automatisch.

\blx{} erlaubt die Veranstaltungsangaben in den Feldern \Feld{eventdate}, \Feld{eventtitle} und \Feld{venue} nur in der \Typ{proceedings}-Familie. Bei \archbib{} sind die ganzen Buchtypen mit Ausnahme der Hochschulschriften nur Aliase. Trotzdem empfiehlt es sich, die korrekte Typisierung beizubehalten, um die die Kompatibilität zu den Standardstilen nicht stärker zu schädigen als unbedingt nötig.

\subsection{Konferenzen}

\paragraph{Ausstellungen}
Ausstellungskataloge sollten in \Feld{eventtype} mit dem Lokalisierungsschlüssel \Lokalisierung{exhibition} identifiziert werden. \Lokalisierung{exhibcat} würde auch erkannt werden, allerdings wird es ohnedies der Stil regeln, ob \enquote{Ausstellung} oder \enquote{Ausstellungskatalog} angezeigt wird. Weitere Felder sind \Feld{eventdate} und \Feld{venue}. Bei letzterem stellt sich das Problem, daß es anders als \Feld{location} keine Liste ist. Und einen \Englisch{date list}-Datentyp gibt es in \blx{} ohnehin nicht. Für Wanderausstellungen kann man jetzt mit den Listenfeldern \Feld{multivenue} und \Feld{multieventdate} \emph{zusätzliche} Orte und Jahreszahlen angeben. Falls letzteres benutzt wird, muß es dieselbe Zahl an Elementen wie \Feld{multivenue} aufweisen, sonst gibt es eine Fehlermeldung.

\paragraph{Festschriften}
Die geehrte Person oder Institution gehört in das Feld \Feld{festschrift}. Da es sich dabei um ein übliches Namensfeld handelt, käme \archbib{} ggf. auch mit Sammelfestschriften für mehrere Jubilare zurecht. Ein \Feld{eventtype} ist überflüssig, weil das Vorhandensein von \Feld{festschrift} den Veranstaltungstyp eindeutig identifiziert. Im Feld \Feld{festschriftaddon} kann man Zusätze wie \enquote{zum 65. Geb.} unterbringen.

\paragraph{Auktionen}
Auktionskataloge werden in den von \archbib{} implementierten Richtlinien nirgendwo erwähnt, weswegen ich mich diesbezüglich bei den Kunsthistorikern umgesehen habe. Sie sollten normalerweise den Typ \Typ{booklet} haben. International üblich ist es, das Auktionshaus als korporativen Autor und den Bearbeiter ggf. als sekundären Herausgeber zu nennen. \Feld{eventtype} sollte einen der Lokalisierungsschlüssel \Lokalisierung{auction}, \Lokalisierung{auctions}, \Lokalisierung{specialauction}, \Lokalisierung{specialauctions} beinhalten. \Feld{venue} und taggenaues \Feld{eventdate} sollten angeben werden und möglichst auch die \Feld{eventnumber} (Auktionen werden normalerweise durchnummeriert).

\paragraph{Titelübersetzungen}
Mitunter soll bei Literatur in unüblichen Sprachen entweder eine Übersetzung des Titels oder der Titel eines Resumés in einer geläufigeren Sprache angegeben werden. Diese Funktion läßt sich mit der Option \Option{summarytitle} anschalten. Die Übersetzung geht in das Feld \Feld{summarytitle}. Das Feld verhält sich ebenfalls wie eine \Feld{titlenote}

\paragraph{Und sonst?}
Wenn nichts von den Vorgenannten paßt, kann man im Feld \Feld{titlenote} auch einen wörtlich auszudruckenden Inhalt übergeben.

\subsection{Namen}

\paragraph{Formatierung}

\paragraph{Bearbeiter von Quelleneditionen}
Normalerweise sind Autoren und Herausgeber von selbstständigen Werken sich gegenseitig ausschließende Angaben, wobei der Autor ggf. gewinnt. Ich habe es auch außerhalb des fachlichen Spektrums von \archbib{} noch nie gesehen, daß Herausgeber wissenschaftlicher Serien im Apparat genannt werden. Es ist auf jeden Fall überflüssig, sie in den Datenbanken zu erfassen. Zwei Ausnahmen sind mir davon bekannt: Auktionskataloge (\cref{kap_events}) und Quelleneditionen. Bei letzteren wird üblicherweise der Name des Originalautors zitiert. Bearbeiter, Übersetzer und Kommentatoren werden bei den vollständigen Angaben genannt. Dafür gibt es in \archbib{} die boolsche Option \Option{usesourceeditor}. Das globale Anschalten sollte normalerweise kein Problem sein. Man kann sie aber auch im \Feld{options}-Feld für Einträge einzeln angeben. \blx{} hat Lokalisationsschlüssel für kombinierte Rollen. Dabei wird die erste Rolle ausgeschrieben und weitere mit den zwei Anfangsbuchstaben angehängt: \Lokalisierung{editortrco} ist also ein Herausgeber, Übersetzer und Kommentator (Vorsicht: eigene Pluralformen!). Wenn die Namen für alle Rollen identisch sind, kann man das so im Feld \Feld{editortype}. Man kann sie aber auch in die Namensfelder \Feld{translator}, \Feld{annotator}, \Feld{commentator} schreiben und \blx{} ist das Zusammenbauen der Rollen überlassen. Rollen, für die es keine eigenen Felder gibt, kann man als \Feld{editora}, \Feld{editorb} und \Feld{editorc} erfassen und dann mit \Feld{editoratype}, \Feld{editorbtype} und \Feld{editorctype} zuordnen (\Lokalisierung{collaborator}, \Lokalisierung{compiler}, \Lokalisierung{continuator}, \Lokalisierung{founder}, \Lokalisierung{organizer}, \Lokalisierung{redactor}, \Lokalisierung{revisor})

\paragraph{Ligaturen der Initialen}

Manche Stile verlangen in bestimmten Fällen Ligaturen der Initialen der Vornamen (St, Ph, Th, Ch). Die \blx-Autoren haben einen entsprechenden \Englisch{feature request} einmal abgelehnt, weil ihnen das zu randständig für nicht unerhebliche Programmierarbeiten erschien. Der klassische Weg, der schon in \BibTeX{} funktioniert hat, ist die folgende Namensschreibung:
\begin{lstlisting}
author = {Müller, {Th}\relax omas}
\end{lstlisting}
Das hat den Vorteil, daß es sortiert wird, aber den Nachteil, daß man es händisch in die Datenbanken eintragen muß. \archbib{} hat eine Option \Option{giveninitligatures}, der man eine Liste solcher Ligaturen übergeben kann, die dann bis zum ersten Treffer automatisch abgearbeitet wird (deshalb \enquote{Chr} vor \enquote{Ch}). Allerdings geschieht dies erst auf der \LaTeXi-Seite, wenn die Sortierung schon stattgefunden hat. T[rude] Meier müßte hier alphabetisch vor Th[orsten] Meier kommen, \Biber{} sortiert aber noch nach den vollständigen Vornamen. Solche Fälle sind selten und können mit dem \Feld{sortname}-Feld leicht repariert werden. Man muß aber beim Korrekturlesen wissen, daß so etwas passieren kann.

\paragraph{Trunkierung von Listen}
Wenn die Option \Option{preservelastauthor} wahr ist, dann werden Namenslisten wie \Kbd{Müller AND Meier AND Schneider AND Schulze} statt mit \enquote{Müller, Meier u.\,a.} mit \enquote{Müller \textellipsis{} Schulze} trunkiert. Die Werte für \Option{maxnames} und \Option{minnames} gelten entsprechend.

\paragraph{Anonyme Werke in Autor/Jahr-Stilen}

In Autor/Jahr-Stilen fehlen in anonymen Werken der oder die Autorennamen für die Erzeugung des Labels. \blx{} nimmt dann Titel, denn man meist als \Feld{shorttitle} abkürzt. \archbib{} hingegen kennt ein Feld \Feld{anonstring}, in dem man einen Namen für einen Anonymus unterbringen kann (von Haus aus ist es leer, so daß auch hier der Titel greift). Das kann automatisch geschehen.  Da \Biber es lesen können muß, kann man hier keine \LaTeXi-Makros verwenden. Weil \Feld{anonstring} in der Liste der möglichen Namensfelder von Labelnamen als letztes kommt, kann es nur gewählt werden, wenn nichts anderes trifft. Man kann es deshalb mit einem Filter an jeden Eintrag setzen. Obacht! Das Feld wird als Name geparst.
\begin{lstlisting}
\DeclareSourcemap{
	\maps[datatype=bibtex]{
		\map{
			\step[fieldset=anonstring,fieldvalue={{N.{\,}N.}}]}}}
\end{lstlisting}

\subsection{Datum}
\paragraph{\enquote{ohne Jahr}}
Wenn das Publikationszahl

\subsection{Publikationsorte, Verlage und Institutionen}
\paragraph{\enquote{ohne Ort}}
Wenn Verlagsorte fehlen, setzt \archbib{} automatisch einen Lokalisationsschlüssel für \enquote{ohne Ort}. Deswegen sollte man das nicht selbst eintragen.
\paragraph{Regionen}
Amerikanische Orte werden normalerweise in der Form \enquote{Stadt, Bundesstaat} angegeben. Da viele \archbib-Stile kommaseparierte Listen von Verlagsorten verwenden, ist das etwas störend. Es schreibt den Bereich hinter dem Komma deshalb ein Makro \Befehl{} und erlaubt so eine andere Formatierung. Von Haus aus läßt es den Staat einfach weg.

\paragraph{Verlage}
Verlage werden von \archbib-Stilen normalerweise nicht genutzt. Trotzdem sollte man sie in der Datenbank angeben, weil es manchmal nützlich ist, auf ihr Vorhandensein zu testen. Im Gegensatz zu \blx{} sind Verlage sogar im Typ \Typ{thesis} erlaubt. Wofür das gut ist, wird in \cref{kap_archlokal} näher erläutert.

\paragraph{Verlagsorte in Zeitschriften}
Verlagsorte sind in Zeitschriften erlaubt. Man kann sie mit der Option \Option{journallocation} anschalten.

\paragraph{Institutionen}
Die Namen von Institutionen in den Hochschulschriften interagieren mit der Frage, ob der Stil Publikationsorte angibt. Wenn man die Universität mit ihrem Standort angibt, kommt es zu einer Doppelung. Allerdings ist bei den deutschen Traditionsuniversitäten unüblich, deren Namen zu verwenden: es heißt auch im akademischen Sprachgebrauch \enquote{Uni. Tübingen} und nicht \enquote{Eberhard-Karls-Universität}. Es gibt aber sehr wohl den umgekehrten Fall: \enquote{Harvard} wird nie \enquote{Uni. Cambridge, Massachusetts} genannt, auch, um die Verwechslung mit dem  \Englisch{Massachusetts Institute of Technology} am selben Ort zu vermeiden. \archbib{} kennt verschiedene Modi, den Block aus Institution, Ort und Verlag zusammenzusetzen, die mit der Option \Option{useinstitution} gesteuert werden. Diese Option kann man auch im \Option{options}-Feld für einzelne Werke setzen. Trotzdem kann es sein, daß man in der Schlußredaktion manuelle Anpassungen vornehmen muß.

\paragraph{Nachdrucke}
Wenn die boolsche Option \Option{origfields} wahr ist, behandelt \archbib{} Werke als Reprints, sofern eines der Felder \Feld{origdate}, \Feld{origlocation} oder \Feld{origpublisher} vorhanden ist.

\subsection{Lokalisierung}\label{kap_archlokal}

\paragraph{Typen von Examensschriften}

Bei den Typen von Examensschriften gibt es ein Problem mit dem Bologna-Prozeß, in dem in Deutschland die traditionellen Magister- und Diplomabschlüsse gegen angelsächsische \Englisch{Master of Arts} oder \Englisch{Master of Science} ausgetauscht und Bachelor-Abschlüsse anstelle der Zwischenprüfung bzw. des Vordiploms eingeführt wurden. \blx{} selbst kennt nur den Schlüssel \Lokalisierung{mathesis}, der im Deutschen zu \enquote{Magisterarbeit} übersetzt. Das ließ sich nach dem Bologna-Prozeß wegen der Arbwärtskompatibilität schlecht ändern. Solange die Typen von Examensschriften abgekürzt zitiert werden, ist das meistens kein Problem, da sowohl der \Latein{Magister Artium} als auch der \Englisch{Master of Arts} üblicherweise mit \enquote{M.\,A.} oder \enquote{MA.} angegeben wird. Werden sie allerdings ausgeschrieben, ist der Unterschied sichtbar. Hier kommt es jetzt zu einer Inkomapatibilität von \blx{} und \archbib: Letzteres definiert die für deutsche Verhältnisse notwendigen Lokalisationsschlüssel \Lokalisierung{bathesis}, \Lokalisierung{magisterthesis} und \Lokalisierung{postdocthesis} (für die Habilitationsschrift). \Lokalisierung{mathesis} ist in diesem Schema der \Englisch{Master of Arts}.

Seit Version 2.3.0 hat \archbib{} auch die Schlüssel \Lokalisierung{bscthesis} für den \Englisch{Bachelor of Science} bzw. \Lokalisierung{mscthesis} für den \Englisch{Master of Science}.

\paragraph{Ungedruckte Examensschriften}

Für die Examensschriften gibt es jeweils Varianten, die sie als ungedruckt markieren. Diese sind \emph{nicht} dafür gedacht, in das \Feld{type}-Feld geschrieben zu werden, sondern ausschließlich für automatische Entscheidungen. Deutsche Examensschriften werden nach der Aufnahme in wissenschaftliche Serien nicht mehr als Hochschulschriften ausgewiesen. Insoweit erübrigt sich die Unterscheidung von gedruckt und ungedruckt hier. Bei ausländischen kann das durchaus anders sein. Niederländische Dissertationen z.\,B. werden regelmäßig schon vor dem Rigorosum als Verlagsdruck veröffentlicht. Datum und Adresse der Verteidigung sind dann hinter dem Schmutztitel eingedruckt. Es wäre falsch, diese als ungedruckt zu bezeichnen. Deshalb erlaubt \archbib die Felder \Feld{publisher} und \Feld{isbn} auch bei Hochschulschriften. Auf deren Vorhandensein kann geprüft werden, um gedruckte von ungedruckten Hoschulschriften zu unterscheiden.

\subsection{Reihen}

\paragraph{Welche Reihen sollen erfaßt werden?}
Es gibt in den selbstständigen Schriften verschiedene Arten von Reihen. Im fachlichen Bereich von \archbib sollten nur wissenschaftliche Reihen mit Nummerierung ausgeben werden. Man erkennt sie meist daran, daß sie von Fachinstitutionen wie Denkmalpflegeämtern, Museen, Universitätsinstituten oder selbstständigen Forschungseinrichtungen herausgeben werden, die für die fachliche Qualitätssicherung innerhalb ihres Kompetenzrahmens haften. Nichtnummerierte Reihen sind bei den angelsächsischen Universitätsverlagen üblich, z.\,B. \Englisch{Approaches to Anthropological Archaeology} der \Englisch{Cambridge University Press}. \archbib{} ignoriert solche Reihen wegen des fehlenden \Feld{number}-Feldes. Da Serien im \archbib{}-Kosmos meistens nicht speziell ausgezeichnet sind, könnte man sie von Untertiteln dann auch gar nicht unterscheiden. Auch die Verlage fassen Teile ihres Programms gerne in Reihen zusammen (z.\,B. \enquote{Rowohlts Monographien}, \enquote{Zaberns Bildbände zur Archäologie}). Das dient einem einheitlichen Marketing und ganz gewiß nicht einer Qualitätssicherung unter wissenschaftlichen Gesichtspunkten, auch wenn man sich manchmal mit prominenten Herausgebern schmückt. So etwas wird in akademischen Literaturapparaten meistens ignoriert, und sie sind auch nicht im Abkürzungsverzeichnis der RGK gelistet. Wenn sie durchnummeriert sind, kann \archbib{} sie allerdings nicht selbstständig erkennen. Bei den \enquote{Universitätstaschenbüchern} (UTB) scheinen da latente Unsicherheiten zu bestehen, dabei ist das ziemlich eindeutig eine verlagsübergreifende Reihe, die ein einheitliches Marketing ermöglichen soll.

\paragraph{Unterreihen}

Unterreihen kommen typischerweise vor, wenn vielbändige Publikationen von Langzeitprojekten innerhalb bereits bestehender wissenschaftlicher Reihen publiziert werden sollen. Die \enquote{Römische-Germanischen Forschungen} z.\,B. haben die Subserien \enquote{Heuneburgstudien} und \enquote{Studien zur Küstenarchäologie Schleswig-Holsteins}. \archbib stellt dafür die Felder \Feld{subseries} und \Feld{subnumber} bereit.

\subsection{Position der Fußnotenmarke}\label{kap_autopunct}

Einige archäologische Stile haben die Regel, daß Fußnotenlabel im Text \emph{immer vor} dem Satzzeichen zu stehen haben. Das ist insoweit bemerkenswert, als der Duden hier eine sematische Differenzierung vornimmt: Demnach stehen Fußnoten hinter dem schließenden Satzzeichen, wenn sie sich auf den gesamten Satz beziehen, aber davor, wenn sie sich nur auf das letzte Wort bzw. die letzte Wortgruppe beziehen \autocite[108]{duden:25}. Sie können aber durchaus auch an beliebigen Worten stehen, insbesondere, wenn bei Aufzählungen die Elemente jeweils eigene Nachweise benötigen.

Bei einigen Stilen von \archbib{} mußte deshalb der Positionstausch des Fußnotenlabels bei Verwendung von \Befehl{autocite} (vgl. \cref{kap_zitat}) aufgehoben werden. Mit der Option \Option{autopunct}\Kbd{=true} kann man das wieder anschalten.

\subsection{Sonstiges}

\paragraph{Sprachen}
Wie oben beschreiben, ist es nachgerade ein Charakteristikum RGK-artiger Stile, keine Angaben über die Sprache von Werken zu machen. Nichtsdestotrotz wertet \archbib{} das Feld \Feld{language} u.\,U. aus. Manchmal wird nämlich verlangt, daß nur deutschsprachige Werke deutsch lokalisert werden. Werke in anderen Sprachen sollen englische Lokalisation aufweisen (eds., p.). Dann braucht man diese Information bei nichtdeutschen Werken. Der Mechanismus dafür ist in den Stilen hardcodiert und läßt sich nicht einfach per Option ändern.

\paragraph{Auflagen}
\archbib{} kennt nur numerische Auflagen. Es ist aber möglich, so etwas wie \enquote{revidierte und erweiterte 22. Jubiläumsauflage} in das Feld \Feld{edition} zu schreiben. \archbib{} extrahiert dann die erste Zahl, die es findet, und verwirft den Rest.

Auflagennummern kann man an verschiedenen Positionen als hochgestellte Zahl anheften. Das regelt die Option \Option{editionsuperscript}.

\paragraph{Starke Trennungen in Multizitaten}
Manche Stile unterscheide in Zitaten von mehreren Werken zwischen starken und schwachen Trennungen, wobei erstere ein Ersatz für die in Anmerkungen nicht vorhandenen Absätze ist. Die starke Trennung der RGK-Regeln ist \enquote{.~--~}. \Befehl{multilistdelim} gibt immer die schwache Trennung an. Die starke Trennung findet sich in \Befehl{strongcitedelim} und sollte zwischen zwei Zitierkommandos gestellt werden:
\begin{lstlisting}
\footnote{\cite{key1}\strongcitedelim\cites{key2,key3}}
\end{lstlisting}

\paragraph{\enquote{Titelschlagworte}}
Unter diesem Label wird in den RGK-Richtlinien ein Verzeichnis der häufig zitierten Literatur verstanden, die meist nach einem Autor/Kurztitel-Schema, evtl. auch nach Autor/Jahr-Schema (bei Zeitschriften mit Jahrgang) erzeugt. Dafür ist keine spezielle Programmierung nötig. Das kann man einfach mit \blx' Abkürzungsverzeichnis realisieren. Schreiben Sie die Label in das \Feld{shorthand}-Feld und geben sie das Verzeichnis mit \Befehl{printshorthands} aus. Sinnvoll ist das nur in \Englisch{verbose}-Stilen, wo man kein allgemeines Literaturverzeichnis hat.

\paragraph{URL in Label}
Mit der Option \Option{urlinlabel} kann man erreichen, daß beim Typ \Typ{Online} die Gruppe aus URL und Zugriffsdatum als Zitierlabel verwendet wird. Das ist eigentlich nur in \Englisch{verbose}-Stilen sinnvoll. Wenn trotzdem ein Literaturverzeichnis ausgedruckt werden soll, kann man dort den Eintrag mit
\begin{lstlisting}
\ExecuteBibliographyOptions [online]{skipbib=true}
\end{lstlisting}
unterdrücken.

\chapter{Die Ökologie von \archbib}

In einer Serie von Blogposts auf meiner privaten Homepage habe ich \archbib{} in Zusammenarbeit mit verschiedenen Hilfsmitteln ausprobiert. Dies insbesondere, um zu erfahren, ob ich dies von der \archbib{}-Seite aus unterstützen kann. Meine Erkenntnisse sind hier zusammengefaßt. Ein bißchen Mißtrauen ist geboten, denn mit Ausnahme von \Paket{tex4ht} und meines selbstgeschriebenen Webeditors habe ich keines dieser Programme vorher im Produktiveinsatz gehabt.

\section{Editoren}

\subsection{\LyX}
\LyX{} ist ein graphischer Editor á la \App{MS~Word} für \LaTeXi. Er benutzt eine eigene Makrosprache, die für die Bildschirmausgabe in eine einfache, HTML-ähnliche Teilmenge und für druckbare Dokumente nach ins volle \LaTeXi{} übersetzt wird. Das setzt aber voraus, daß entsprechende Makros für die Bildschirmansicht vorhanden sind. Man kann beliebige \LaTeXi-Kommandos eingeben oder neue \LyX-Makros für sie schreiben. Seit Version 2.3.0 wird \blx{} nativ unterstützt, allerdings nur für Autor-Jahr- und numerische Stile. Schwierig wird es allerdings dann, wenn man Pakete wie \archbib{} nutzen will, die \blx{} wesentlich erweitern und insbesondere neue Zitierkommandos einführen. Hier muß man dann damit leben, daß dies in der Bildschirmausgabe nicht oder nur sehr unzureichend unterstützt wird.\autocite{braun_i_lyx}

Alles in allem ist das ein ziemlich cleverer Ansatz. Warum ich \LyX{} dennoch für größere Dokumente nicht in Betracht ziehen würde, hängt vor allem damit zusammen, daß die graphische Eingabe wieder lokales Markup erzeugt. Je größer die Dokumente werden, desto mehr hilft mir aber ein kluges semantisches Markup bei der Schlußredaktion. Auf diesen Vorteil würde ich bei Dokumenten von der Größe einer Abschlußarbeit nicht verzichten wollen. Überhaupt finde ich die Möglichkeit, \LaTeXi-Dokumente ohne \LaTeXi-Kenntnisse zu schreiben, ziemlich problematisch. Ein Gutteil seiner hohen Skalierbarkeit liegt doch gerade darin, eigene Makros zur Strukturierung und Automatisierung schreiben zu können. Neben dem Verlust an Feinsteuerung des Literaturapparates wiegt meines Erachtens der Verlust an sematischem Markup schwer, der desto wichtiger wird, je größer das Dokument ist.

\subsection{\App{Pandoc} und R Markdown}

Über \App{Pandoc} läßt sich Ähnliches sagen wie über \LyX. Es ist ein universaler Konverter für Dokumentenformate. Als intermediäres Format benutzt es eine stark erweiterte Markdownsyntax (Fußnoten, Bibliographien, Mathematiksatz, Diashows etc.). Es ist möglich, Literaturreferenzen einzufügen, die nach \LaTeXi{} mit \blx{} oder \BibTeX{} und in andere Formate mit der CSL (Citation Style Language) bearbeitet werden können. Für die speziellen Zwecke, wie sie von \archbib{} implementiert werden, stehen aber natürlich keine Ausdrücke zu Verfügung. Zudem wiegt hier wieder der Verlust an semantischem Markup schwer. Umfangreiche Texte möchte man damit eigentlich nicht schreiben.

In der Archäologie ist \App{Pandoc} als Bestandteil von \App{RStudio} verbreitet, denn R Markdown ist nichts anderes als \App{Pandoc} Markdown.\autocite{braun_i_pandoc}

\subsection{\blx-Editor auf der Webseite des Autors}
Auf der Webseite des Autors befindet sich ein Editor, um Datenbankeinträge im \BibTeX-Format zu erstellen.\autocite{braun_i_biblatex_editor} Selbstverständlich wird hier der Funktionsumfang von \archbib{} voll unterstützt. Den habe ich hauptsächlich deshalb erstellt, weil ich häufiger Archivalien oder graue Literatur eingebe, für die sich \BibTeX-Einträge meist nicht einfach aus dem Netz saugen lassen. Da sich hier ein Teil der Felder ständig wiederholt , kann man mit dem Editor eine Vorlage anlegen, die sich dann immer wieder klonen läßt. Er ist sicherlich nicht perfekt, aber diesen speziellen Zweck erfüllt er ziemlich gut.

\subsection{\App{Pandoc} und R Markdown}

\autocite{braun_i_overleaf}

\section{Datenbanken}
\subsection{\App{Citavi}}

\autocite{braun_i_citavi_zotero}

\subsection{\App{Zotero}}

\autocite{braun_i_citavi_zotero}

\subsection{\Paket{JabRef}}
\Paket{JabRef} ist ein in der \TeXi-Welt sehr verbreiteter Manager für \BibTeX-Datenbanken. Da er in Java geschrieben ist, läuft er auf allen relevanten Betriebssystemen. Die Integration von \archbib{} ist ziemlich leicht. Da das \BibTeX-Format keine abgeschlossene Menge an Feldern oder Dokumententypen hat, wurden entsprechende Editoren vorgesehen, um den Unfang an die Bedürfnisse des konkreten Nutzers anpassen zu können.\autocite{braun_i_jabref}

\section{\Paket{tex4ht}}

\Paket{tex4ht} ist ein Konverter, um \LaTeXi-Dokumente in XML-Formate zu konvertieren. Unter anderen auch HTML und ODT. Letzeres ist interessant, weil es sich mit \App{LibreOffice} nahezu verlustfrei in in das \App{MS~Word}-Format DOC(X) oder auch RTF(X) konvertieren läßt, das in der Regel von archäologischen Zeitschriften gefordert wird. Jetzt ist es so, daß \LaTeXi{} ein sehr viel reichhaltigeres Format als diese ist. Vieles läßt sich kaum konvertieren oder nur mit Tricks (mathematische Formeln z\,B. werden als Grafiken ausgegeben). Wenn man allerdings ein Manuskript für einen Zeitschriftenaufsatz erstellt, braucht man auch nur ganz wenige Formate.

\Paket{tex4ht} konvertiert \blx{} mittlerweile ziemlich gut.\autocite{braun_i_tex4ht} Früher mußte es nach jeder neuen \blx-Version erst einmal neu angepaßt werden, weswegen man unbedingt ein Backup einer funktionierenden Version behalten sollte, wenn man auf diesen Workflow angewiesen ist. Zuletzt war das allerdings nicht mehr der Fall. Meiner Erfahrung nach sollte man unbedingt das Dokument für die nativen UTF-8-Engines \LuaLaTeX{} oder \XeLaTeX{} schreiben und auf keinen Fall für \pdfLaTeX. Außerdem sollte man \Paket{tex4ht} niemals direkt aufrufen, sondern immer über die Batchskripte \App{make4ht} bzw. \App{tex4ebook}. Deren Workflow legt man in einer mk4-Datei fest. Für ein einfaches Dokument mit \archbib{} sieht das so aus:
\begin{lstlisting}
if mode=="draft" then
  Make:htlatex()
else
  Make:htlatex()
  Make:biber()
  Make:htlatex()
  Make:htlatex()
end
\end{lstlisting}
Jetzt kann man die Konvertierung mit
\begin{lstlisting}
$ make4ht -ule mycfg.mk4 -f odt <jobname>.tex
\end{lstlisting}
durchführen.

Ansonsten sollte man auch Tabellen in der Quelldatei anlegen, selbst wenn man sie später in separaten Dateien ausliefern will, damit die guten Referenzierungsmöglichkeiten von \LaTeXi{} genutzt werden können. Ich habe tatsächlich so schon Artikel erstellt, ohne daß die Redaktion gemerkt hätte, daß hier \LaTeXi{} genutzt wurde.

Beispiele mit weiteren Formaten und tatsächlich konvertierte Dateien finden sich auf meiner Webseite.\autocite{braun_i_blxarch_tex4ht}.  

\printbibliography[notcategory=examples,title=Sekundärliteratur]
\printbibliography[category=examples,title=Zitierbeispiele]
%\printindex


\end{document}
\endinput